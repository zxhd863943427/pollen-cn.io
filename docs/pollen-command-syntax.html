<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>12&nbsp;Pollen command syntax</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="mb.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x"> Pollen :<span class="mywbr"> &nbsp;</span>&#36825;&#26412;&#20070;&#26159;&#19968;&#20010;&#31243;&#24207;</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="Installation.html" class="tocviewlink" data-pltdoc="x">Installation</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="quick-tour.html" class="tocviewlink" data-pltdoc="x">Quick tour</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="____.html" class="tocviewlink" data-pltdoc="x">&#32972;&#26223;&#25925;&#20107;</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="big-picture.html" class="tocviewlink" data-pltdoc="x">&#24635;&#35272;</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="first-tutorial.html" class="tocviewlink" data-pltdoc="x">&#31532;&#19968;&#20010;&#25945;&#31243;&#65306;&#39033;&#30446;&#26381;&#21153;&#22120;&#21644;&#39044;&#22788;&#29702;&#22120;</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="second-tutorial.html" class="tocviewlink" data-pltdoc="x">&#31532;&#20108;&#20010;&#25945;&#31243;&#65306;Markdown&#12289;&#27169;&#26495;&#21644;&#39029;&#38754;&#26641;</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="third-tutorial.html" class="tocviewlink" data-pltdoc="x">&#31532;&#19977;&#20010;&#25945;&#31243;&#65306; Pollen &#26631;&#35760;&#21644;&#26631;&#31614;&#20989;&#25968;</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="fourth-tutorial.html" class="tocviewlink" data-pltdoc="x">&#31532;&#22235;&#20010;&#25945;&#31243;&#65306;&#22810;&#20010;&#36755;&#20986;&#30446;&#26631;</a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="mini-tutorial.html" class="tocviewlink" data-pltdoc="x">&#19968;&#20123;&#29420;&#31435;&#30340;&#23567;&#25945;&#31243;</a></td></tr><tr><td align="right">10&nbsp;</td><td><a href="raco-pollen.html" class="tocviewlink" data-pltdoc="x">&#20351;&#29992; <span class="stt">raco pollen</span> &#21629;&#20196;</a></td></tr><tr><td align="right">11&nbsp;</td><td><a href="File_formats.html" class="tocviewlink" data-pltdoc="x">File formats</a></td></tr><tr><td align="right">12&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Pollen command syntax</a></td></tr><tr><td align="right">13&nbsp;</td><td><a href="programming-pollen.html" class="tocviewlink" data-pltdoc="x">Programming Pollen</a></td></tr><tr><td align="right">14&nbsp;</td><td><a href="Module_reference.html" class="tocviewlink" data-pltdoc="x">Module reference</a></td></tr><tr><td align="right">15&nbsp;</td><td><a href="Unstable_module_reference.html" class="tocviewlink" data-pltdoc="x">Unstable module reference</a></td></tr><tr><td align="right">16&nbsp;</td><td><a href="Acknowledgments.html" class="tocviewlink" data-pltdoc="x">Acknowledgments</a></td></tr><tr><td align="right">17&nbsp;</td><td><a href="License___source_code.html" class="tocviewlink" data-pltdoc="x">License &amp; source code</a></td></tr><tr><td align="right">18&nbsp;</td><td><a href="version-notes.html" class="tocviewlink" data-pltdoc="x">Version notes (3.2.3136.1057)</a></td></tr><tr><td align="right"></td><td><a href="doc-index.html" class="tocviewlink" data-pltdoc="x">Index</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>12&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Pollen command syntax</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">12.1&nbsp;</td><td><a href="#%28part._.The_golden_rule%29" class="tocviewlink" data-pltdoc="x">The golden rule</a></td></tr><tr><td align="right">12.2&nbsp;</td><td><a href="#%28part._the-lozenge%29" class="tocviewlink" data-pltdoc="x">The lozenge (&#9674;)</a></td></tr><tr><td align="right">12.3&nbsp;</td><td><a href="#%28part._the-two-command-styles%29" class="tocviewlink" data-pltdoc="x">The two command styles:<span class="mywbr"> &nbsp;</span> Pollen style &amp; Racket style</a></td></tr><tr><td align="right">12.4&nbsp;</td><td><a href="#%28part._.Embedding_character_entities%29" class="tocviewlink" data-pltdoc="x">Embedding character entities</a></td></tr><tr><td align="right">12.5&nbsp;</td><td><a href="#%28part._.Adding_.Pollen-style_commands_to_a_.Racket_file%29" class="tocviewlink" data-pltdoc="x">Adding Pollen-<wbr></wbr>style commands to a Racket file</a></td></tr><tr><td align="right">12.6&nbsp;</td><td><a href="#%28part._.Further_reading%29" class="tocviewlink" data-pltdoc="x">Further reading</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">12.1<tt>&nbsp;</tt></span><a href="#%28part._.The_golden_rule%29" class="tocsubseclink" data-pltdoc="x">The golden rule</a></td></tr><tr><td><span class="tocsublinknumber">12.2<tt>&nbsp;</tt></span><a href="#%28part._the-lozenge%29" class="tocsubseclink" data-pltdoc="x">The lozenge (&#9674;)</a></td></tr><tr><td><span class="tocsublinknumber">12.2.1<tt>&nbsp;</tt></span><a href="#%28part.__.But_.I_don_t_want_to_use_the_lozenge_____%29" class="tocsubseclink" data-pltdoc="x">&ldquo;But I don&rsquo;t want to use the lozenge ...&rdquo;</a></td></tr><tr><td><span class="tocsublinknumber">12.2.2<tt>&nbsp;</tt></span><a href="#%28part._.Lozenge_helpers%29" class="tocsubseclink" data-pltdoc="x">Lozenge helpers</a></td></tr><tr><td><span class="tocsublinknumber">12.2.2.1<tt>&nbsp;</tt></span><a href="#%28part._.How_.M.B_types_the_lozenge%29" class="tocsubseclink" data-pltdoc="x">How MB types the lozenge</a></td></tr><tr><td><span class="tocsublinknumber">12.2.2.2<tt>&nbsp;</tt></span><a href="#%28part._.Dr.Racket_toolbar_button%29" class="tocsubseclink" data-pltdoc="x">Dr<span class="mywbr"> &nbsp;</span>Racket toolbar button</a></td></tr><tr><td><span class="tocsublinknumber">12.2.2.3<tt>&nbsp;</tt></span><a href="#%28part._.Dr.Racket_key_shortcut%29" class="tocsubseclink" data-pltdoc="x">Dr<span class="mywbr"> &nbsp;</span>Racket key shortcut</a></td></tr><tr><td><span class="tocsublinknumber">12.2.2.4<tt>&nbsp;</tt></span><a href="#%28part._.A.H.K_script_for_.Windows%29" class="tocsubseclink" data-pltdoc="x">AHK script for Windows</a></td></tr><tr><td><span class="tocsublinknumber">12.2.2.5<tt>&nbsp;</tt></span><a href="#%28part._.Emacs_script%29" class="tocsubseclink" data-pltdoc="x">Emacs script</a></td></tr><tr><td><span class="tocsublinknumber">12.2.2.6<tt>&nbsp;</tt></span><a href="#%28part._.Emacs_input_method%29" class="tocsubseclink" data-pltdoc="x">Emacs input method</a></td></tr><tr><td><span class="tocsublinknumber">12.2.2.7<tt>&nbsp;</tt></span><a href="#%28part._.Vim__and_.Evil__digraph_sequence%29" class="tocsubseclink" data-pltdoc="x">Vim (and Evil) digraph sequence</a></td></tr><tr><td><span class="tocsublinknumber">12.2.2.8<tt>&nbsp;</tt></span><a href="#%28part._.Compose_key%29" class="tocsubseclink" data-pltdoc="x">Compose key</a></td></tr><tr><td><span class="tocsublinknumber">12.3<tt>&nbsp;</tt></span><a href="#%28part._the-two-command-styles%29" class="tocsubseclink" data-pltdoc="x">The two command styles:<span class="mywbr"> &nbsp;</span> Pollen style &amp; Racket style</a></td></tr><tr><td><span class="tocsublinknumber">12.3.1<tt>&nbsp;</tt></span><a href="#%28part._.The_command_name%29" class="tocsubseclink" data-pltdoc="x">The command name</a></td></tr><tr><td><span class="tocsublinknumber">12.3.1.1<tt>&nbsp;</tt></span><a href="#%28part._.Invoking_tag_functions%29" class="tocsubseclink" data-pltdoc="x">Invoking tag functions</a></td></tr><tr><td><span class="tocsublinknumber">12.3.1.2<tt>&nbsp;</tt></span><a href="#%28part._.Invoking_other_functions%29" class="tocsubseclink" data-pltdoc="x">Invoking other functions</a></td></tr><tr><td><span class="tocsublinknumber">12.3.1.3<tt>&nbsp;</tt></span><a href="#%28part._.Inserting_the_value_of_a_variable%29" class="tocsubseclink" data-pltdoc="x">Inserting the value of a variable</a></td></tr><tr><td><span class="tocsublinknumber">12.3.1.4<tt>&nbsp;</tt></span><a href="#%28part._.Inserting_metas%29" class="tocsubseclink" data-pltdoc="x">Inserting metas</a></td></tr><tr><td><span class="tocsublinknumber">12.3.1.5<tt>&nbsp;</tt></span><a href="#%28part._.Retrieving_metas%29" class="tocsubseclink" data-pltdoc="x">Retrieving metas</a></td></tr><tr><td><span class="tocsublinknumber">12.3.1.6<tt>&nbsp;</tt></span><a href="#%28part._.Inserting_a_comment%29" class="tocsubseclink" data-pltdoc="x">Inserting a comment</a></td></tr><tr><td><span class="tocsublinknumber">12.3.2<tt>&nbsp;</tt></span><a href="#%28part._.The_.Racket_arguments%29" class="tocsubseclink" data-pltdoc="x">The Racket arguments</a></td></tr><tr><td><span class="tocsublinknumber">12.3.3<tt>&nbsp;</tt></span><a href="#%28part._the-text-body%29" class="tocsubseclink" data-pltdoc="x">The text body</a></td></tr><tr><td><span class="tocsublinknumber">12.4<tt>&nbsp;</tt></span><a href="#%28part._.Embedding_character_entities%29" class="tocsubseclink" data-pltdoc="x">Embedding character entities</a></td></tr><tr><td><span class="tocsublinknumber">12.5<tt>&nbsp;</tt></span><a href="#%28part._.Adding_.Pollen-style_commands_to_a_.Racket_file%29" class="tocsubseclink" data-pltdoc="x">Adding Pollen-<wbr></wbr>style commands to a Racket file</a></td></tr><tr><td><span class="tocsublinknumber">12.6<tt>&nbsp;</tt></span><a href="#%28part._.Further_reading%29" class="tocsubseclink" data-pltdoc="x">Further reading</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">8.4.900</span></div><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="File_formats.html" title="backward to &quot;11 File formats&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot; Pollen :这本书是一个程序&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="programming-pollen.html" title="forward to &quot;13 Programming Pollen&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3>12<tt>&nbsp;</tt><a name="(part._pollen-command-syntax)"></a>Pollen command syntax</h3><h4>12.1<tt>&nbsp;</tt><a name="(part._.The_golden_rule)"></a>The golden rule</h4><p>Pollen uses a special character &#8212; the <span style="font-style: italic">lozenge</span>, which looks like this: &#9674; &#8212; to mark commands  within a Pollen source file. So when you put a &#9674; in your source, whatever comes next will be treated as a command. If you don&rsquo;t, it will just be interpreted as plain text.</p><h4>12.2<tt>&nbsp;</tt><a name="(part._the-lozenge)"></a>The lozenge (&#9674;)</h4><p>I chose the lozenge as the command character because a) it appears in almost every font, b) it&rsquo;s barely used in ordinary typesetting, c) it&rsquo;s not used in any programming language that I know of, and d) its shape and color allow it to stand out easily in code without being distracting.</p><p>Consideration (b) is especially important in a text-based language like Pollen. If Pollen used something more common as its command character, then every time you used that character in text, you&rsquo;d have to specially escape it. This would make it cumbersome and annoying to import plain text into Pollen source files. This is the Pareto-optimal trade.</p><p>If you&rsquo;re using DrRacket, you can use the <span class="ssansserif">Insert Command Char</span> button at the top of the editing window to &#8212;&#160;you guessed it &#8212; insert the command character.</p><p>If you&rsquo;re using a different editor, here&rsquo;s how you type it:</p><p><span style="font-weight: bold">Mac</span>: Option + Shift + V
<br/><span style="font-weight: bold">Windows</span>: holding down Alt, type 9674 on the num pad
<br/><span style="font-weight: bold">GNU/Linux, BSD</span>: Type Ctrl + Shift + U, then 25CA, then Enter</p><p>For more information on entering arbitrary Unicode characters, see <a href="https://en.wikipedia.org/wiki/Unicode_input">Wikipedia</a>.</p><h5>12.2.1<tt>&nbsp;</tt><a name="(part.__.But_.I_don_t_want_to_use_the_lozenge_____)"></a>&ldquo;But I don&rsquo;t want to use the lozenge ...&rdquo;</h5><p>Fine, but you have to pick <span style="font-style: italic">something</span> as your command character. If you don&rsquo;t like this one, you can override it within a project &#8212;&#160;see <a href="Setup.html#%28part._setup-overrides%29" data-pltdoc="x">How to override setup values</a>.</p><p>Still, it&rsquo;s not like I&rsquo;m asking you to learn <a href="http://c2.com/cgi/wiki?AplLanguage">APL</a>. Racket supports Unicode, so it&rsquo;s a little silly to artificially limit ourselves to ASCII.</p><p>My advice: don&rsquo;t knock the lozenge till you try it.</p><h5>12.2.2<tt>&nbsp;</tt><a name="(part._.Lozenge_helpers)"></a>Lozenge helpers</h5><h5>12.2.2.1<tt>&nbsp;</tt><a name="(part._.How_.M.B_types_the_lozenge)"></a>How MB types the lozenge</h5><p>I work on Mac OS. I use <a href="http://www.ergonis.com/products/typinator/">Typinator</a> to assign the &#9674; character to the otherwise never-used Option + Shift + backslash key combo (ordinarily assigned to &#187;). For that matter, I assign &#955; to Option + backslash (ordinarily assigned to &#171;).</p><h5>12.2.2.2<tt>&nbsp;</tt><a name="(part._.Dr.Racket_toolbar_button)"></a>DrRacket toolbar button</h5><p>When you use DrRacket, you&rsquo;ll see a button in the toolbar that says <span class="ssansserif">Insert command char</span>. This will insert the lozenge (or whatever command character you&rsquo;ve defined for your project).</p><h5>12.2.2.3<tt>&nbsp;</tt><a name="(part._.Dr.Racket_key_shortcut)"></a>DrRacket key shortcut</h5><p>Courtesy of <a href="https://github.com/interstar">Phil Jones</a>: &ldquo;I created a file called <span class="stt">"keys.rkt"</span> &#8212;</p><div class="foreignCode"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">#lang s-exp framework/keybinding-lang</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">(keybinding "c:&lt;" (&#955; (editor evt) (send editor insert "&#9674;")))</span></p></td></tr></table></div></div><p>&#8212;&#160;and loaded it into DrRacket with <span class="ssansserif">Edit|Keybindings | Add user-defined keybindings ...</span>. Now I can use ctrl + shift + &lt; to put the lozenge in.&rdquo;</p><p>See also <font class="badlink">(part ("(lib scribblings/drracket/drracket.scrbl)" "defining-shortcuts"))</font> in the DrRacket documentation.</p><h5>12.2.2.4<tt>&nbsp;</tt><a name="(part._.A.H.K_script_for_.Windows)"></a>AHK script for Windows</h5><p>Courtesy of <a href="https://github.com/maphew">Matt Wilkie</a>: &ldquo;Here&rsquo;s a working AHK script to have double-tap backtick send the lozenge character. It took way more time than I want to think about, once started I couldn&rsquo;t let go.&rdquo;</p><div class="foreignCode"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">;</span></p></td></tr><tr><td><p><span class="stt">; Double-tap backtick sends Pollen command character (&#9674;)</span></p></td></tr><tr><td><p><span class="stt">; For some reason I needed to use Unicode 'U+25CA'</span></p></td></tr><tr><td><p><span class="stt">; instead of the standard alt-code '9674'</span></p></td></tr><tr><td><p><span class="stt">;</span></p></td></tr><tr><td><p><span class="stt">; Adapted from http://ahkscript.org/docs/commands/SetTimer.htm</span></p></td></tr><tr><td><p><span class="stt">; and http://www.autohotkey.com/board/topic/145507-how-to-use-double-tap-backtick-with-pass-through/</span></p></td></tr><tr><td><p><span class="stt">;</span></p></td></tr><tr><td><p><span class="stt">#EscapeChar \</span></p></td></tr><tr><td><p><span class="stt">$`::</span></p></td></tr><tr><td><p><span class="stt">if winc_presses &gt; 0</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">{winc_presses += 1</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">return</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">}</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">winc_presses = 1</span></p></td></tr><tr><td><p><span class="stt">SetTimer, TheKey, 250 ; Wait for more presses, in milliseconds</span></p></td></tr><tr><td><p><span class="stt">return</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">TheKey:</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">SetTimer, TheKey, off</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">if winc_presses = 1 ; The key was pressed once.</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">{Send `</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">}</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else if winc_presses = 2 ; The key was pressed twice.</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">{Send {U+25CA}</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">}</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">; Regardless of which action above was triggered, reset the count to</span></p></td></tr><tr><td><p><span class="stt">; prepare for the next series of presses:</span></p></td></tr><tr><td><p><span class="stt">winc_presses = 0</span></p></td></tr><tr><td><p><span class="stt">return</span></p></td></tr></table></div></div><p>An alternative, courtesy of <a href="http://www.barzilay.org">Eli Barzilay</a>: &ldquo;this turns M-\ to the lozenge&rdquo;:</p><div class="foreignCode"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">!\:: Send {U+25CA}</span></p></td></tr></table></div></div><h5>12.2.2.5<tt>&nbsp;</tt><a name="(part._.Emacs_script)"></a>Emacs script</h5><p>Courtesy of <a href="https://github.com/lerichard95">Richard Le</a>: &ldquo;I chose M-\ because that&rsquo;s the key for the lambda character in DrRacket.&rdquo; (<a href="http://www.barzilay.org">Eli Barzilay</a> shortened it.)</p><div class="foreignCode"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(global-set-key "\M-\\" "&#9674;")</span></p></td></tr></table></div></div><h5>12.2.2.6<tt>&nbsp;</tt><a name="(part._.Emacs_input_method)"></a>Emacs input method</h5><p>Courtesy of <a href="https://github.com/LemmingAvalanche">Kristoffer Haugsbakk</a>: &ldquo;Press <span class="stt">C-\ rfc1345 RET</span> to choose the <span class="RktSym">rfc1345</span> input method and toggle
it on. When this input method is toggled, <span class="RktInBG"><span class="hspace"></span><span class="RktIn">&#9674;</span><span class="hspace"></span></span> can be produced by
entering <span class="stt">&amp;LZ</span>. The input method can be toggled on and off with <span class="stt">C-\</span>.&rdquo;</p><h5>12.2.2.7<tt>&nbsp;</tt><a name="(part._.Vim__and_.Evil__digraph_sequence)"></a>Vim (and Evil) digraph sequence</h5><p>Courtesy of <a href="https://github.com/LemmingAvalanche">Kristoffer Haugsbakk</a>: &ldquo;While in insert mode in Vim, or insert state in Evil (Emacs), press
<span class="stt">C-k LZ</span> to enter <span class="RktInBG"><span class="hspace"></span><span class="RktIn">&#9674;</span><span class="hspace"></span></span>. <span class="stt">C-k</span> lets you enter a digraph (in
Vim terminology) which maps to another character. In this case, the
digraph <span class="stt">LZ</span> maps to <span class="RktInBG"><span class="hspace"></span><span class="RktIn">&#9674;</span><span class="hspace"></span></span>.</p><p>To make another mapping for this character in Vim, execute the following
command: <span class="stt">:digraphs ll 9674</span> to (in this case) use the digraph <span class="stt">ll</span>. <span class="stt">9674</span> is the decimal representation of <span class="RktInBG"><span class="hspace"></span><span class="RktIn">&#9674;</span><span class="hspace"></span></span> in Unicode.&rdquo;</p><h5>12.2.2.8<tt>&nbsp;</tt><a name="(part._.Compose_key)"></a>Compose key</h5><p>Courtesy of <a href="https://github.com/rrthomas">Reuben Thomas</a>: &ldquo;When using X11 (common on GNU/Linux and BSD systems), one can use the <a href="https://en.wikipedia.org/wiki/Compose_key">Compose key</a>. It is often disabled by default; check your desktop environment&rsquo;s keyboard settings, or at a lower level, to use the Menu key as the Compose key:</p><div class="foreignCode"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">setxkbmap -option compose:menu</span></p></td></tr></table></div></div><p>See <span class="stt">man xkeyboard-config</span> for all the ready-made options for the
compose key.</p><p>Since the lozenge character does not exist in the default compose-mapping file, you need to add this to your <span class="stt">"~/.XCompose"</span>:</p><div class="foreignCode"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&lt;Multi_key&gt; &lt;l&gt; &lt;l&gt; : "&#9674;"</span></p></td></tr></table></div></div><p>See <span class="stt">man XCompose</span>, or for more details, including many additional Compose bindings, see <a href="https://github.com/rrthomas/pointless-xcompose">pointless-xcompose</a>.&rdquo;</p><h4>12.3<tt>&nbsp;</tt><a name="(part._the-two-command-styles)"></a>The two command styles: Pollen style &amp; Racket style</h4><p>Pollen commands can be entered in one of two styles: <span style="font-style: italic">Pollen style</span> or <span style="font-style: italic">Racket style</span>. Both styles start with a lozenge (<span class="RktInBG"><span class="hspace"></span><span class="RktIn">&#9674;</span><span class="hspace"></span></span>):</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktInBG"><span class="hspace"></span><span class="RktIn">&#9674;</span><span class="hspace"></span></span><span class="hspace">&nbsp;</span><span class="sroman">&#8249;<span style="font-style: italic">command name</span>&#8250;</span><span class="hspace">&nbsp;</span><span class="RktInBG"><span class="hspace"></span><span class="RktIn">[</span><span class="hspace"></span></span><span class="hspace">&nbsp;</span><span class="sroman">&#8249;<span style="font-style: italic">Racket arguments ...</span>&#8250;</span><span class="hspace">&nbsp;</span><span class="RktInBG"><span class="hspace"></span><span class="RktIn">]</span><span class="hspace"></span></span><span class="hspace">&nbsp;</span><span class="RktInBG"><span class="hspace"></span><span class="RktIn">{</span><span class="hspace"></span></span><span class="hspace">&nbsp;</span><span class="sroman">&#8249;<span style="font-style: italic">text body ...</span>&#8250;</span><span class="hspace">&nbsp;</span><span class="RktInBG"><span class="hspace"></span><span class="RktIn">}</span><span class="hspace"></span></span></td></tr><tr><td><span class="RktInBG"><span class="hspace"></span><span class="RktIn">&#9674;</span><span class="hspace"></span></span><span class="hspace">&nbsp;</span><span class="RktInBG"><span class="hspace"></span><span class="RktIn">(</span><span class="hspace"></span></span><span class="hspace">&nbsp;</span><span class="sroman">&#8249;<span style="font-style: italic">Racket expression</span>&#8250;</span><span class="hspace">&nbsp;</span><span class="RktInBG"><span class="hspace"></span><span class="RktIn">)</span><span class="hspace"></span></span></td></tr></table></blockquote><p><span style="font-weight: bold">Pollen-style commands</span></p><p>A Pollen-style command has the three possible parts after the <span class="RktInBG"><span class="hspace"></span><span class="RktIn">&#9674;</span><span class="hspace"></span></span>:</p><ul><li><p>The <span style="font-style: italic">command name</span> appears immediately after the <span class="RktInBG"><span class="hspace"></span><span class="RktIn">&#9674;</span><span class="hspace"></span></span>. Typically it&rsquo;s a short word.</p></li><li><p>The <span style="font-style: italic">Racket arguments</span> appear between square brackets. Pollen is partly an interface to the Racket programming language. These arguments are entered using Racket conventions &#8212;&#160;e.g., a string of text needs to be put in quotes as a <span class="RktVal">"string</span><span class="hspace">&nbsp;</span><span class="RktVal">of</span><span class="hspace">&nbsp;</span><span class="RktVal">text"</span><span class="RktMeta"></span>. If you like programming, you&rsquo;ll end up using these arguments frequently. If you don&rsquo;t, you won&rsquo;t.</p></li><li><p>The <span style="font-style: italic">text body</span> appears between braces (aka curly brackets). You can put any ordinary text here. Unlike with the Racket arguments, you don&rsquo;t put quotes around the text.</p></li></ul><p>Each of the three parts is optional. You can also nest commands within each other. However:</p><ul><li><p>You can never have spaces between the three parts.</p></li><li><p>Whatever parts you use must always appear in the order above.</p></li></ul><p>Here are a few examples of correct Pollen-style commands:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">variable-name</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">tag</span></span></span><span class="RktPn">{</span><span class="RktMeta">Text</span><span class="hspace">&nbsp;</span><span class="RktMeta">inside</span><span class="hspace">&nbsp;</span><span class="RktMeta">the</span><span class="hspace">&nbsp;</span><span class="RktMeta">tag.</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">tag</span></span></span><span class="RktPn">[</span><span class="RktPn">#:attr</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"value"</span><span class="RktPn">]</span><span class="RktPn">{</span><span class="RktMeta">Text</span><span class="hspace">&nbsp;</span><span class="RktMeta">inside</span><span class="hspace">&nbsp;</span><span class="RktMeta">the</span><span class="hspace">&nbsp;</span><span class="RktMeta">tag</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">get-customer-id</span><span class="RktPn">[</span><span class="RktVal">"Brennan</span><span class="hspace">&nbsp;</span><span class="RktVal">Huff"</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">tag</span></span></span><span class="RktPn">{</span><span class="RktMeta">His</span><span class="hspace">&nbsp;</span><span class="RktMeta">ID</span><span class="hspace">&nbsp;</span><span class="RktMeta">is</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">get-customer-id</span><span class="RktPn">[</span><span class="RktVal">"Brennan</span><span class="hspace">&nbsp;</span><span class="RktVal">Huff"</span><span class="RktPn">]</span><span class="RktMeta">.</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr></table></blockquote><p>And some incorrect examples:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">tag</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta">{Text</span><span class="hspace">&nbsp;</span><span class="RktMeta">inside</span><span class="hspace">&nbsp;</span><span class="RktMeta">the</span><span class="hspace">&nbsp;</span><span class="RktMeta">tag.}</span><span class="hspace">&nbsp;</span><span class="RktMeta">;</span><span class="hspace">&nbsp;</span><span class="RktMeta">space</span><span class="hspace">&nbsp;</span><span class="RktMeta">between</span><span class="hspace">&nbsp;</span><span class="RktMeta">first</span><span class="hspace">&nbsp;</span><span class="RktMeta">and</span><span class="hspace">&nbsp;</span><span class="RktMeta">second</span><span class="hspace">&nbsp;</span><span class="RktMeta">parts</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">tag</span></span></span><span class="RktPn">[</span><span class="RktSym">Text</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">inside</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">the</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="badlink"><span class="RktValLink">tag</span></span></span><span class="RktPn">]</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta">;</span><span class="hspace">&nbsp;</span><span class="RktMeta">text</span><span class="hspace">&nbsp;</span><span class="RktMeta">body</span><span class="hspace">&nbsp;</span><span class="RktMeta">needs</span><span class="hspace">&nbsp;</span><span class="RktMeta">to</span><span class="hspace">&nbsp;</span><span class="RktMeta">be</span><span class="hspace">&nbsp;</span><span class="RktMeta">within</span><span class="hspace">&nbsp;</span><span class="RktMeta">braces</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">tag</span></span></span><span class="RktPn">{</span><span class="RktMeta">Text</span><span class="hspace">&nbsp;</span><span class="RktMeta">inside</span><span class="hspace">&nbsp;</span><span class="RktMeta">the</span><span class="hspace">&nbsp;</span><span class="RktMeta">tag</span><span class="RktPn">}</span><span class="RktMeta">[#:attr</span><span class="hspace">&nbsp;</span><span class="RktMeta">"value"]</span><span class="hspace">&nbsp;</span><span class="RktMeta">;</span><span class="hspace">&nbsp;</span><span class="RktMeta">wrong</span><span class="hspace">&nbsp;</span><span class="RktMeta">order</span><span class="RktMeta"></span></td></tr></table></blockquote><p>The next section describes each of these parts in detail.</p><p><span style="font-weight: bold">Racket-style commands</span></p><p>If you&rsquo;re familiar with Racket expressions, you can use the Racket-style commands to embed them within Pollen source files. It&rsquo;s simple: any Racket expression becomes a Pollen command by adding <span class="RktInBG"><span class="hspace"></span><span class="RktIn">&#9674;</span><span class="hspace"></span></span> to the front. So in Racket, this code:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><font class="badlink"><span class="RktModLink"><span class="RktSym">racket</span></span></font><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">band</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"Level"</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">format</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"~a</span><span class="hspace">&nbsp;</span><span class="RktVal">~a"</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">band</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">*</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">3</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">7</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote><p>Can be converted to Pollen like so:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">band</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"Level"</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">format</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"~a</span><span class="hspace">&nbsp;</span><span class="RktVal">~a"</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">band</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">*</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">3</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">7</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote><p>And in DrRacket, they produce the same output:</p><blockquote class="SubFlow"><p><span class="RktVal"><span class="stt">Level 42</span></span></p></blockquote><p>Beyond that, there&rsquo;s not much to say about Racket style &#8212;&#160;any valid Racket expression will also be a valid Racket-style Pollen command.</p><p><span style="font-weight: bold">The relationship of Pollen style and Racket style</span></p><p>Even if you don&rsquo;t plan to write a lot of Racket-style commands, you should be aware that under the hood, Pollen is converting all Pollen-style commands to Racket style. So a Pollen-style command that looks like this:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">headline</span><span class="RktPn">[</span><span class="RktPn">#:size</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="badlink"><span class="RktValLink">'</span></span></span><span class="RktSym">enormous</span><span class="RktPn">]</span><span class="RktPn">{</span><span class="RktMeta">Man</span><span class="hspace">&nbsp;</span><span class="RktMeta">Bites</span><span class="hspace">&nbsp;</span><span class="RktMeta">Dog!</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr></table></blockquote><p>Is actually being turned into this Racket-style command:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">headline</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">#:size</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="badlink"><span class="RktValLink">'</span></span></span><span class="RktSym">enormous</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"Man</span><span class="hspace">&nbsp;</span><span class="RktVal">Bites</span><span class="hspace">&nbsp;</span><span class="RktVal">Dog!"</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote><p>Thus a Pollen-style command is just an alternate way of writing a Racket-style command. (More broadly, all of Pollen is just an alternate way of using Racket.)</p><p>The corollary is that you can always write Pollen commands using whichever style is more convenient or readable. For instance, the earlier example, written in the Racket style:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">band</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"Level"</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">format</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"~a</span><span class="hspace">&nbsp;</span><span class="RktVal">~a"</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">band</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">*</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">3</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">7</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote><p>Can be rewritten in Pollen style:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="RktPn">[</span><span class="RktSym">band</span><span class="RktPn">]</span><span class="RktPn">{</span><span class="RktMeta">Level</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">format</span></span></span><span class="RktPn">[</span><span class="RktVal">"~a</span><span class="hspace">&nbsp;</span><span class="RktVal">~a"</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">band</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">*</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">3</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">7</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr></table></blockquote><p>And it will work the same way.</p><p>You can combine the two styles in whatever way makes sense to you. I typically reserve Pollen-style commands for when I&rsquo;m mixing commands into textual material. Meaning, I prefer <span class="RktSym">&#9674;headline</span><span class="RktPn">[</span><span class="RktPn">#:size</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="badlink"><span class="RktValLink">'</span></span></span><span class="RktSym">enormous</span><span class="RktPn">]</span><span class="RktPn">{</span><span class="RktSym">Man</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">Bites</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">Dog!</span><span class="RktPn">}</span><span class="RktMeta"></span> over <span class="RktSym">&#9674;</span><span class="RktPn">(</span><span class="RktSym">headline</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">#:size</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="badlink"><span class="RktValLink">'</span></span></span><span class="RktSym">enormous</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"Man</span><span class="hspace">&nbsp;</span><span class="RktVal">Bites</span><span class="hspace">&nbsp;</span><span class="RktVal">Dog!"</span><span class="RktPn">)</span><span class="RktMeta"></span>. But when I&rsquo;m writing or using traditional Racket functions, I find Racket-style commands to be more readable (because they correspond to ordinary Racket syntax, and thus can be moved between Pollen and Racket source files more easily). So I prefer <span class="RktSym">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">band</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"Level"</span><span class="RktPn">)</span><span class="RktMeta"></span> over <span class="RktSym">&#9674;define</span><span class="RktPn">[</span><span class="RktSym">band</span><span class="RktPn">]</span><span class="RktPn">{</span><span class="RktSym">Level</span><span class="RktPn">}</span><span class="RktMeta"></span>.</p><h5>12.3.1<tt>&nbsp;</tt><a name="(part._.The_command_name)"></a>The command name</h5><p>In Pollen, you&rsquo;ll likely use a command for one of these purposes:</p><ul><li><p>To invoke a tag function.</p></li><li><p>To invoke another function.</p></li><li><p>To insert the value of a variable.</p></li><li><p>To insert a <span class="RktSym">meta</span><span class="RktMeta"></span> value.</p></li><li><p>To insert a comment.</p></li></ul><p>Let&rsquo;s look at each kind of use.</p><h5>12.3.1.1<tt>&nbsp;</tt><a name="(part._.Invoking_tag_functions)"></a>Invoking tag functions</h5><p>By default, Pollen treats every command name as a <span style="font-style: italic">tag function</span>. The default tag function creates a  <font class="badlink">tagged X-expression</font> with the command name as the tag, and the text body as the content.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">strong</span><span class="RktPn">{</span><span class="RktMeta">Fancy</span><span class="hspace">&nbsp;</span><span class="RktMeta">Sauce,</span><span class="hspace">&nbsp;</span><span class="RktMeta">$1</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr></table></blockquote><blockquote class="SubFlow"><p><span class="RktVal"><span class="stt">'(strong "Fancy Sauce, $1")</span></span></p></blockquote><p>To streamline markup, Pollen doesn&rsquo;t restrict you to a certain set of tags, nor does it make you define your tags ahead of time. Just type a tag, and you can start using it.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">utterly-ridiculous-tag-name</span><span class="RktPn">{</span><span class="RktMeta">Oh</span><span class="hspace">&nbsp;</span><span class="RktMeta">really?</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr></table></blockquote><blockquote class="SubFlow"><p><span class="RktVal"><span class="stt">'(utterly-ridiculous-tag-name "Oh really?")</span></span></p></blockquote><p>The one restriction is that you can&rsquo;t invent names for tags that are already being used for other commands. For instance, <span class="RktSym"><span class="badlink"><span class="RktValLink">map</span></span></span><span class="RktMeta"></span> is a name permanently reserved by the Racket function <span class="RktSym"><span class="badlink"><span class="RktValLink">map</span></span></span>. It&rsquo;s also a rarely-used HTML tag. But gosh, you really want to use it. Problem is, if you invoke it directly, Pollen will think you mean the other <span class="RktSym"><span class="badlink"><span class="RktValLink">map</span></span></span>:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">map</span></span></span><span class="RktPn">{</span><span class="RktMeta">Fancy</span><span class="hspace">&nbsp;</span><span class="RktMeta">Sauce,</span><span class="hspace">&nbsp;</span><span class="RktMeta">$1</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr></table></blockquote><blockquote class="SubFlow"><p><span class="RktErr"><span class="stt">map: arity mismatch;<br/>the expected number of arguments does not match the given number<br/>&#160;&#160;given: 1<br/>&#160;&#160;arguments...:<br/>&#160;&#160;&#160;&#160;"Fancy Sauce, $1"</span></span></p></blockquote><p>What to do? Read on.</p><h5>12.3.1.2<tt>&nbsp;</tt><a name="(part._.Invoking_other_functions)"></a>Invoking other functions</h5><p>Though every command name starts out as a default tag function, it doesn&rsquo;t necessarily end there. You have two options for invoking other functions: defining your own, or invoking others from Racket.</p><p><span style="font-weight: bold">Defining your own functions</span></p><p>Use the <span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span> command to create your own function for a command name. After that, when you use the command name, you&rsquo;ll get the new behavior. For instance, recall this example showing the default tag-function behavior:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">strong</span><span class="RktPn">{</span><span class="RktMeta">Fancy</span><span class="hspace">&nbsp;</span><span class="RktMeta">Sauce,</span><span class="hspace">&nbsp;</span><span class="RktMeta">$1</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr></table></blockquote><blockquote class="SubFlow"><p><span class="RktVal"><span class="stt">'(strong "Fancy Sauce, $1")</span></span></p></blockquote><p>We can define <span class="RktSym">strong</span><span class="RktMeta"></span> to do something else, like add to the text:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">strong</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">text</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="badlink"><span class="RktValLink">`</span></span></span><span class="RktPn">(</span><span class="RktSym">strong</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="badlink"><span class="RktValLink">,</span></span></span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">format</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"Hey!</span><span class="hspace">&nbsp;</span><span class="RktVal">Listen</span><span class="hspace">&nbsp;</span><span class="RktVal">up!</span><span class="hspace">&nbsp;</span><span class="RktVal">~a"</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">text</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">strong</span><span class="RktPn">{</span><span class="RktMeta">Fancy</span><span class="hspace">&nbsp;</span><span class="RktMeta">Sauce,</span><span class="hspace">&nbsp;</span><span class="RktMeta">$1</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr></table></blockquote><blockquote class="SubFlow"><p><span class="RktVal"><span class="stt">'(strong "Hey! Listen up! Fancy Sauce, $1")</span></span></p></blockquote><p>The replacement function has to accept any arguments that might get passed along, but it doesn&rsquo;t have to do anything with them. For instance, this function definition won&rsquo;t work because <span class="RktSym">strong</span><span class="RktMeta"></span> is going to get a text body that it&rsquo;s not defined to handle:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">strong</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="badlink"><span class="RktValLink">'</span></span></span><span class="RktPn">(</span><span class="RktSym">fib</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"1</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="hspace">&nbsp;</span><span class="RktVal">8</span><span class="hspace">&nbsp;</span><span class="RktVal">13</span><span class="hspace">&nbsp;</span><span class="RktVal">..."</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">strong</span><span class="RktPn">{</span><span class="RktMeta">Fancy</span><span class="hspace">&nbsp;</span><span class="RktMeta">Sauce,</span><span class="hspace">&nbsp;</span><span class="RktMeta">$1</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr></table></blockquote><blockquote class="SubFlow"><p><span class="RktErr"><span class="stt">strong: arity mismatch;<br/>the expected number of arguments does not match the given number<br/>&#160;&#160;expected: 0<br/>&#160;&#160;given: 1<br/>&#160;&#160;arguments...:<br/>&#160;&#160;&#160;&#160;"Fancy Sauce, $1"</span></span></p></blockquote><p>Whereas in this version, <span class="RktSym">strong</span><span class="RktMeta"></span> accepts an argument called <span class="RktSym">text</span><span class="RktMeta"></span>, but then ignores it:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">strong</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">text</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="badlink"><span class="RktValLink">'</span></span></span><span class="RktPn">(</span><span class="RktSym">fib</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"1</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="hspace">&nbsp;</span><span class="RktVal">8</span><span class="hspace">&nbsp;</span><span class="RktVal">13</span><span class="hspace">&nbsp;</span><span class="RktVal">..."</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">strong</span><span class="RktPn">{</span><span class="RktMeta">Fancy</span><span class="hspace">&nbsp;</span><span class="RktMeta">Sauce,</span><span class="hspace">&nbsp;</span><span class="RktMeta">$1</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr></table></blockquote><blockquote class="SubFlow"><p><span class="RktVal"><span class="stt">'(fib "1 1 2 3 5 8 13 ...")</span></span></p></blockquote><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>The text body can pass an indefinite number of arguments. A well-designed tag function should be able to handle them, unlike these synthetic examples. For a more realistic example, see <a href="#%28part._the-text-body%29" data-pltdoc="x">The text body</a>.</p></blockquote></blockquote></blockquote><p>You can attach any behavior to a command name. As your project evolves, you can also update the behavior of a command name. In that way, Pollen commands become a set of hooks to which you can attach more elaborate processing.</p><p><span style="font-weight: bold">Using Racket functions</span></p><p>You aren&rsquo;t limited to functions you define. Any function from Racket, or any Racket library, can be invoked directly by using it as a command name. Here&rsquo;s the function <span class="RktSym"><span class="badlink"><span class="RktValLink">range</span></span></span>, which creates a list of numbers:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">range</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">20</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote><blockquote class="SubFlow"><p><span class="RktVal"><span class="stt">'(range 1 20)</span></span></p></blockquote><p>Hold on &#8212;&#160;that&rsquo;s not what we want. Where&rsquo;s the list of numbers? The problem here is that we forgot to import the <font class="badlink"><span class="RktModLink"><span class="RktSym">racket/list</span></span></font> library, which contains the definition for <span class="RktSym"><span class="badlink"><span class="RktValLink">range</span></span></span>. (If you need to find out what library contains a certain function, the Racket documentation will tell you.) Without <font class="badlink"><span class="RktModLink"><span class="RktSym">racket/list</span></span></font>, Pollen just thinks we&rsquo;re trying to use <span class="RktSym"><span class="badlink"><span class="RktValLink">range</span></span></span><span class="RktMeta"></span> as a tag function (and if we had been, then <span class="RktVal"><span class="stt">'(range 1 20)</span></span> would&rsquo;ve been the right result).</p><p>We fix this by using the <span class="RktSym"><span class="badlink"><span class="RktValLink">require</span></span></span> command to bring in the <font class="badlink"><span class="RktModLink"><span class="RktSym">racket/list</span></span></font> library, which contains the <span class="RktSym"><span class="badlink"><span class="RktValLink">range</span></span></span>  we want:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">require</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">racket/list</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">range</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">20</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote><blockquote class="SubFlow"><p><span class="RktVal"><span class="stt">'(1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19)</span></span></p></blockquote><p>Of course, you can also invoke Racket functions indirectly, by attaching them to functions you define for command names:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">require</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">racket/list</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">rick</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">start</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">finish</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">range</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">start</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">finish</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym">rick</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">20</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote><blockquote class="SubFlow"><p><span class="RktVal"><span class="stt">'(1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19)</span></span></p></blockquote><p>Let&rsquo;s return to the problem that surfaced in the last section &#8212; the fact that some command names can&rsquo;t be used as tag functions because they&rsquo;re already being used for other things. You can work around this by defining your own tag function with a non-conflicting name.</p><p>For instance, suppose we want to use <span class="RktSym"><span class="badlink"><span class="RktValLink">map</span></span></span><span class="RktMeta"></span> as a tag even though Racket is using it for its own function called <span class="RktSym"><span class="badlink"><span class="RktValLink">map</span></span></span>. First, we invent a command name that doesn&rsquo;t conflict. Let&rsquo;s call it <span class="stt">my-map</span>. As you learned above, Pollen will treat a new command name as a tag function by default:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">my-map</span><span class="RktPn">{</span><span class="RktMeta">How</span><span class="hspace">&nbsp;</span><span class="RktMeta">I</span><span class="hspace">&nbsp;</span><span class="RktMeta">would</span><span class="hspace">&nbsp;</span><span class="RktMeta">love</span><span class="hspace">&nbsp;</span><span class="RktMeta">this</span><span class="hspace">&nbsp;</span><span class="RktMeta">to</span><span class="hspace">&nbsp;</span><span class="RktMeta">be</span><span class="hspace">&nbsp;</span><span class="RktMeta">a</span><span class="hspace">&nbsp;</span><span class="RktMeta">map.</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr></table></blockquote><blockquote class="SubFlow"><p><span class="RktVal"><span class="stt">'(my-map "How I would love this to be a map.")</span></span></p></blockquote><p>But <span class="stt">my-map</span> is not the tag we want. We need to define <span class="stt">my-map</span> to be a tag function for <span class="stt">map</span>. We can do this with the Pollen helper <span class="RktSym"><a href="Tag.html#%28def._%28%28lib._pollen%2Ftag..rkt%29._default-tag-function%29%29" class="RktValLink" data-pltdoc="x">default-tag-function</a></span>. That function lives in <a href="Tag.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen/tag</span></a>, so we <span class="RktSym"><span class="badlink"><span class="RktValLink">require</span></span></span> that too:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">require</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">pollen/tag</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">my-map</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="Tag.html#%28def._%28%28lib._pollen%2Ftag..rkt%29._default-tag-function%29%29" class="RktValLink" data-pltdoc="x">default-tag-function</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="badlink"><span class="RktValLink">'</span></span></span><span class="RktSym"><span class="badlink"><span class="RktValLink">map</span></span></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">my-map</span><span class="RktPn">{</span><span class="RktMeta">How</span><span class="hspace">&nbsp;</span><span class="RktMeta">I</span><span class="hspace">&nbsp;</span><span class="RktMeta">would</span><span class="hspace">&nbsp;</span><span class="RktMeta">love</span><span class="hspace">&nbsp;</span><span class="RktMeta">this</span><span class="hspace">&nbsp;</span><span class="RktMeta">to</span><span class="hspace">&nbsp;</span><span class="RktMeta">be</span><span class="hspace">&nbsp;</span><span class="RktMeta">a</span><span class="hspace">&nbsp;</span><span class="RktMeta">map.</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr></table></blockquote><blockquote class="SubFlow"><p><span class="RktVal"><span class="stt">'(map "How I would love this to be a map.")</span></span></p></blockquote><p>Problem solved.</p><h5>12.3.1.3<tt>&nbsp;</tt><a name="(part._.Inserting_the_value_of_a_variable)"></a>Inserting the value of a variable</h5><p>A Pollen command name usually refers to a function, but it can also refer to a <span style="font-style: italic">variable</span>, which is a data value. Once you define the variable, you can insert it into your source by using the &#9674; notation without any other arguments:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">foo</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"bar"</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">The</span><span class="hspace">&nbsp;</span><span class="RktMeta">value</span><span class="hspace">&nbsp;</span><span class="RktMeta">of</span><span class="hspace">&nbsp;</span><span class="RktMeta">foo</span><span class="hspace">&nbsp;</span><span class="RktMeta">is</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">foo</span><span class="RktMeta"></span></td></tr></table></blockquote><blockquote class="SubFlow"><p><span class="RktVal"><span class="stt">The value of foo is bar</span></span></p></blockquote><p>Be careful &#8212;&#160;if you include arguments, even blank ones, Pollen will treat the command name as a function. For instance, this next example won&rsquo;t work, because a variable is not a function:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">foo</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"bar"</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">The</span><span class="hspace">&nbsp;</span><span class="RktMeta">value</span><span class="hspace">&nbsp;</span><span class="RktMeta">of</span><span class="hspace">&nbsp;</span><span class="RktMeta">foo</span><span class="hspace">&nbsp;</span><span class="RktMeta">is</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">foo</span><span class="RktPn">[</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr></table></blockquote><blockquote class="SubFlow"><p><span class="RktErr"><span class="stt">application: not a procedure;<br/>expected a procedure that can be applied to arguments<br/>&#160;&#160;given: "bar"<br/>&#160;&#160;arguments...: [none]</span></span></p></blockquote><p>To understand what happens here, recall the relationship between Pollen&rsquo;s command styles. The Pollen-style command <span class="RktSym">&#9674;foo</span><span class="RktPn">[</span><span class="RktPn">]</span><span class="RktMeta"></span> becomes the Racket-style command <span class="RktPn">(</span><span class="RktSym">foo</span><span class="RktPn">)</span><span class="RktMeta"></span>, which after variable substitution becomes <span class="RktPn">(</span><span class="RktVal">"bar"</span><span class="RktPn">)</span><span class="RktMeta"></span>. If you try to evaluate <span class="RktPn">(</span><span class="RktVal">"bar"</span><span class="RktPn">)</span><span class="RktMeta"></span> &#8212; e.g., in DrRacket &#8212; you&rsquo;ll get the same error.</p><p>The reason we can simply insert <span class="RktSym">&#9674;foo</span><span class="RktMeta"></span> into the text body of another Pollen command is that the variable <span class="RktSym">foo</span><span class="RktMeta"></span> holds a string (i.e., a text value).</p><p>In preprocessor source files, Pollen will convert a variable to a string in a sensible way. For instance, numbers are easily converted:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">zam</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">42</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">The</span><span class="hspace">&nbsp;</span><span class="RktMeta">value</span><span class="hspace">&nbsp;</span><span class="RktMeta">of</span><span class="hspace">&nbsp;</span><span class="RktMeta">zam</span><span class="hspace">&nbsp;</span><span class="RktMeta">is</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">zam</span><span class="RktMeta"></span></td></tr></table></blockquote><blockquote class="SubFlow"><p><span class="RktVal"><span class="stt">The value of zam is 42</span></span></p></blockquote><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>In an unsaved DrRacket file, or a file without a special Pollen source extension, the <span class="stt">#lang pollen</span> designation invokes the Pollen preprocessor by default. You can explicitly invoke preprocessor style by starting a file with <span class="stt">#lang pollen/pre</span>. See also <a href="File_formats.html#%28part._.Preprocessor___pp_extension_%29" data-pltdoc="x">Preprocessor (.pp extension)</a>.</p></blockquote></blockquote></blockquote><p>If the variable holds a container datatype (like a <span class="RktSym"><span class="badlink"><span class="RktValLink">list</span></span></span>, <span class="RktSym"><span class="badlink"><span class="RktValLink">hash</span></span></span>, or <span class="RktSym"><span class="badlink"><span class="RktValLink">vector</span></span></span>), Pollen will produce the Racket text representation of the item. Here, <span class="RktSym">zam</span><span class="RktMeta"></span> is a <span class="RktSym"><span class="badlink"><span class="RktValLink">list</span></span></span> of integers:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">zam</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">list</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">3</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">The</span><span class="hspace">&nbsp;</span><span class="RktMeta">value</span><span class="hspace">&nbsp;</span><span class="RktMeta">of</span><span class="hspace">&nbsp;</span><span class="RktMeta">zam</span><span class="hspace">&nbsp;</span><span class="RktMeta">is</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">zam</span><span class="RktMeta"></span></td></tr></table></blockquote><blockquote class="SubFlow"><p><span class="RktVal"><span class="stt">The value of zam is '(1 2 3)</span></span></p></blockquote><p>This feature is included for your convenience. But in general, your readers won&rsquo;t want to see the Racket representation of a container. So in these cases, you should convert to a string manually in some sensible way. Here, the integers in the list are converted to strings, which are then combined using <span class="RktSym"><span class="badlink"><span class="RktValLink">string-join</span></span></span> from the <font class="badlink"><span class="RktModLink"><span class="RktSym">racket/string</span></span></font> library:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">require</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">racket/string</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">zam</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">list</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">3</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">The</span><span class="hspace">&nbsp;</span><span class="RktMeta">value</span><span class="hspace">&nbsp;</span><span class="RktMeta">of</span><span class="hspace">&nbsp;</span><span class="RktMeta">zam</span><span class="hspace">&nbsp;</span><span class="RktMeta">is</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">string-join</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">map</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="badlink"><span class="RktValLink">number-&gt;string</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">zam</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"</span><span class="hspace">&nbsp;</span><span class="RktVal">and</span><span class="hspace">&nbsp;</span><span class="RktVal">"</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote><blockquote class="SubFlow"><p><span class="RktVal"><span class="stt">The value of zam is 1 and 2 and 3</span></span></p></blockquote><p>Pollen will still produce an error if you try to convert an esoteric value to a string. Here, <span class="RktSym">zam</span><span class="RktMeta"></span> is the addition function (<span class="RktSym"><span class="badlink"><span class="RktValLink">+</span></span></span>):</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">zam</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="badlink"><span class="RktValLink">+</span></span></span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">The</span><span class="hspace">&nbsp;</span><span class="RktMeta">value</span><span class="hspace">&nbsp;</span><span class="RktMeta">of</span><span class="hspace">&nbsp;</span><span class="RktMeta">zam</span><span class="hspace">&nbsp;</span><span class="RktMeta">is</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">zam</span><span class="RktMeta"></span></td></tr></table></blockquote><blockquote class="SubFlow"><p><span class="RktErr"><span class="stt">pollen: Can't convert procedure #&lt;procedure:+&gt; to string</span></span></p></blockquote><p>In Pollen markup, the result is different. A Pollen markup file makes an X-expression, not text, so Pollen doesn&rsquo;t perform <span style="font-style: italic">any</span> automatic text conversion &#8212;&#160;that&rsquo;s your job. Suppose we take the example above &#8212; which worked with the Pollen preprocessor &#8212;&#160;and change the language to <a href="File_formats.html#%28mod-path._pollen%2Fmarkup%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen/markup</span></a>:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="File_formats.html#%28mod-path._pollen%2Fmarkup%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen/markup</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">zam</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">list</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">3</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">The</span><span class="hspace">&nbsp;</span><span class="RktMeta">value</span><span class="hspace">&nbsp;</span><span class="RktMeta">of</span><span class="hspace">&nbsp;</span><span class="RktMeta">zam</span><span class="hspace">&nbsp;</span><span class="RktMeta">is</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">zam</span><span class="RktMeta"></span></td></tr></table></blockquote><p>This time, the file will produce an error:</p><blockquote class="SubFlow"><p><span class="RktErr"><span class="stt">pollen markup error: in '(root "The value of zam is " (1 2 3)), '(1 2 3) is not a valid element (must be txexpr, string, symbol, XML char, or cdata)</span></span></p></blockquote><p>But the second example above, with the explicit conversion using <span class="RktSym"><span class="badlink"><span class="RktValLink">string-join</span></span></span>, does work in Pollen markup, because strings are valid X-expressions:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="File_formats.html#%28mod-path._pollen%2Fmarkup%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen/markup</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">require</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">racket/string</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">zam</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">list</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">3</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">The</span><span class="hspace">&nbsp;</span><span class="RktMeta">value</span><span class="hspace">&nbsp;</span><span class="RktMeta">of</span><span class="hspace">&nbsp;</span><span class="RktMeta">zam</span><span class="hspace">&nbsp;</span><span class="RktMeta">is</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">string-join</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">map</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="badlink"><span class="RktValLink">number-&gt;string</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">zam</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"</span><span class="hspace">&nbsp;</span><span class="RktVal">and</span><span class="hspace">&nbsp;</span><span class="RktVal">"</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote><blockquote class="SubFlow"><p><span class="RktVal"><span class="stt">'(root "The value of zam is " "1 and 2 and 3")</span></span></p></blockquote><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>See <a href="File_formats.html" data-pltdoc="x">File formats</a> for more about the differences between Pollen dialects.</p></blockquote></blockquote></blockquote><p>One special case to know about. In the examples above, there&rsquo;s a word space between the variable and the other text. But suppose you need to insert a variable into text so that there&rsquo;s no space in between. The simple &#9674;&#160;notation won&rsquo;t work, because it won&rsquo;t be clear where the variable name ends and the text begins.</p><p>For instance, suppose we want to use a  variable <span class="RktSym">edge</span><span class="RktMeta"></span> next to the string <span class="RktSym">px</span><span class="RktMeta"></span>:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">edge</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">100</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">p</span><span class="hspace">&nbsp;</span><span class="RktMeta">{</span><span class="hspace">&nbsp;</span><span class="RktMeta">margin-left:</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">edgepx</span><span class="RktMeta">;</span><span class="hspace">&nbsp;</span><span class="RktMeta">}</span><span class="RktMeta"></span></td></tr></table></blockquote><blockquote class="SubFlow"><p><span class="RktErr"><span class="stt">pollen: Can't convert procedure #&lt;procedure:pollen-tag:edgepx&gt; to string</span></span></p></blockquote><p>The example fails because Pollen reads the whole string after the <span class="RktInBG"><span class="hspace"></span><span class="RktIn">&#9674;</span><span class="hspace"></span></span> as the single variable name <span class="RktSym">edgepx</span><span class="RktMeta"></span>. Since <span class="RktSym">edgepx</span><span class="RktMeta"></span> isn&rsquo;t defined, it&rsquo;s treated as a tag function, and since Pollen can&rsquo;t convert a function to a string, we get an error.</p><p>In these situations, surround the variable name with vertical bars <span class="RktInBG"><span class="hspace"></span><span class="RktIn">&#9674;|</span><span class="hspace"></span></span>like so<span class="RktInBG"><span class="hspace"></span><span class="RktIn">|</span><span class="hspace"></span></span> to explicitly indicate where the variable name ends. The bars are not treated as part of the name, nor are they included in the result. Once we do that, we get what we intended:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">edge</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">100</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">p</span><span class="hspace">&nbsp;</span><span class="RktMeta">{</span><span class="hspace">&nbsp;</span><span class="RktMeta">margin-left:</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;|</span><span class="RktSym">edge</span><span class="RktPn">|</span><span class="RktMeta">px;</span><span class="hspace">&nbsp;</span><span class="RktMeta">}</span><span class="RktMeta"></span></td></tr></table></blockquote><blockquote class="SubFlow"><p><span class="RktVal"><span class="stt">p { margin-left: 100px; }</span></span></p></blockquote><p>If you use this notation when you don&rsquo;t need to, nothing bad will happen. The vertical bars are always ignored.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">edge</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">100</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">The</span><span class="hspace">&nbsp;</span><span class="RktMeta">value</span><span class="hspace">&nbsp;</span><span class="RktMeta">of</span><span class="hspace">&nbsp;</span><span class="RktMeta">edge</span><span class="hspace">&nbsp;</span><span class="RktMeta">is</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;|</span><span class="RktSym">edge</span><span class="RktPn">|</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta">pixels}</span><span class="RktMeta"></span></td></tr></table></blockquote><blockquote class="SubFlow"><p><span class="RktVal"><span class="stt">The value of edge is 100 pixels</span></span></p></blockquote><h5>12.3.1.4<tt>&nbsp;</tt><a name="(part._.Inserting_metas)"></a>Inserting metas</h5><p><span style="font-style: italic">Metas</span> are key&#8211;value pairs embedded in a source file that are not included in the main output when the source is compiled. Rather, they&rsquo;re gathered and exported as a separate <font class="badlink"><span class="techoutside"><span class="techinside">hash table</span></span></font> called, unsurprisingly, <span class="stt">metas</span>. This hash table is a good place to store information about the document that you might want to use later (for instance, a list of topic categories that the document belongs to).</p><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>Pollen occasionally uses metas internally. For instance, the <span class="RktSym"><a href="Render.html#%28def._%28%28lib._pollen%2Frender..rkt%29._get-template-for%29%29" class="RktValLink" data-pltdoc="x">get-template-for</a></span> function will look in the metas of a source file to see if a template is explicitly specified. The <a href="Core.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen/core</span></a> module also contains functions for working with metas, such as <span class="RktSym"><a href="Core.html#%28def._%28%28lib._pollen%2Fcore..rkt%29._select-from-metas%29%29" class="RktValLink" data-pltdoc="x">select-from-metas</a></span>.</p></blockquote></blockquote></blockquote><p>To make a meta, you create a tag with the special <span class="RktSym"><a href="Core.html#%28form._%28%28lib._pollen%2Fcore..rkt%29._define-meta%29%29" class="RktStxLink" data-pltdoc="x">define-meta</a></span> name, followed by a key name, and then a value that&rsquo;s a single X-expression:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym"><a href="Core.html#%28form._%28%28lib._pollen%2Fcore..rkt%29._define-meta%29%29" class="RktStxLink" data-pltdoc="x">define-meta</a></span><span class="RktPn">[</span><span class="RktSym">dog</span><span class="RktPn">]</span><span class="RktPn">{</span><span class="RktMeta">Roxy</span><span class="RktPn">}</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta">;</span><span class="hspace">&nbsp;</span><span class="RktMeta">Pollen-style</span><span class="hspace">&nbsp;</span><span class="RktMeta">syntax</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">some-tag</span><span class="RktPn">[</span><span class="RktPn">#:foo</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"bar"</span><span class="RktPn">]</span><span class="RktPn">{</span><span class="RktMeta">Normal</span><span class="hspace">&nbsp;</span><span class="RktMeta">tag</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><a href="Core.html#%28form._%28%28lib._pollen%2Fcore..rkt%29._define-meta%29%29" class="RktStxLink" data-pltdoc="x">define-meta</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">cat</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"Chopper"</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta">;</span><span class="hspace">&nbsp;</span><span class="RktMeta">equivalent</span><span class="hspace">&nbsp;</span><span class="RktMeta">Racket-style</span><span class="hspace">&nbsp;</span><span class="RktMeta">syntax</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">some-tag</span><span class="RktPn">[</span><span class="RktPn">#:zim</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"zam"</span><span class="RktPn">]</span><span class="RktPn">{</span><span class="RktMeta">Another</span><span class="hspace">&nbsp;</span><span class="RktMeta">normal</span><span class="hspace">&nbsp;</span><span class="RktMeta">tag</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr></table></blockquote><p>When you run a source file with metas in it, two things happen. First, the metas are removed from the output:</p><blockquote class="SubFlow"><p><span class="RktVal"><span class="stt">'(some-tag ((key "value")) "Normal tag")<br/><br/>'(some-tag ((key "value")) "Another normal tag")</span></span></p></blockquote><p>Second, the metas are collected into a hash table that is exported with the name <span class="RktSym">metas</span><span class="RktMeta"></span>. To see this hash table, run the file above in DrRacket, then switch to the interactions window and type <span class="stt">metas</span> at the prompt:</p><div class="terminal"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&gt; metas</span></p></td></tr><tr><td><p><span class="stt">'#hasheq((dog . "Roxy") (cat . "Chopper") (here-path . "unsaved-editor"))</span></p></td></tr></table></div></div><p>The only key that&rsquo;s automatically defined in every meta table is <span class="RktVal">'</span><span class="RktVal">here-path</span>, which is the absolute path to the source file. (In this case, because the file hasn&rsquo;t been saved, you&rsquo;ll see the <span class="RktVal"><span class="stt">"unsaved-editor"</span></span> name instead.)</p><p>Still, you can override this too:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym"><a href="Core.html#%28form._%28%28lib._pollen%2Fcore..rkt%29._define-meta%29%29" class="RktStxLink" data-pltdoc="x">define-meta</a></span><span class="RktPn">[</span><span class="RktSym">dog</span><span class="RktPn">]</span><span class="RktPn">{</span><span class="RktMeta">Roxy</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">some-tag</span><span class="RktPn">[</span><span class="RktPn">#:key</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"value"</span><span class="RktPn">]</span><span class="RktPn">{</span><span class="RktMeta">Normal</span><span class="hspace">&nbsp;</span><span class="RktMeta">tag</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><a href="Core.html#%28form._%28%28lib._pollen%2Fcore..rkt%29._define-meta%29%29" class="RktStxLink" data-pltdoc="x">define-meta</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">cat</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"Chopper"</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">some-tag</span><span class="RktPn">[</span><span class="RktPn">#:key</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"value"</span><span class="RktPn">]</span><span class="RktPn">{</span><span class="RktMeta">Another</span><span class="hspace">&nbsp;</span><span class="RktMeta">normal</span><span class="hspace">&nbsp;</span><span class="RktMeta">tag</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><a href="Core.html#%28form._%28%28lib._pollen%2Fcore..rkt%29._define-meta%29%29" class="RktStxLink" data-pltdoc="x">define-meta</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">here-path</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"tesseract"</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote><p>When you run this code, the result will be the same as before, but this time the metas will be different:</p><div class="terminal"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&gt; metas</span></p></td></tr><tr><td><p><span class="stt">'#hasheq((dog . "Roxy") (cat . "Chopper") (here-path . "tesseract"))</span></p></td></tr></table></div></div><p>It doesn&rsquo;t matter how many metas you put in a source file, nor where you put them. They&rsquo;ll all be extracted into the <span class="stt">metas</span> hash table. The order of the metas is not preserved (because order is not preserved in a hash table). But if you have two metas with the same key, the later one will supersede the earlier one:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym"><a href="Core.html#%28form._%28%28lib._pollen%2Fcore..rkt%29._define-meta%29%29" class="RktStxLink" data-pltdoc="x">define-meta</a></span><span class="RktPn">[</span><span class="RktSym">dog</span><span class="RktPn">]</span><span class="RktPn">{</span><span class="RktMeta">Roxy</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><a href="Core.html#%28form._%28%28lib._pollen%2Fcore..rkt%29._define-meta%29%29" class="RktStxLink" data-pltdoc="x">define-meta</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">dog</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"Lex"</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote><p>Though there are two metas named <span class="stt">dog</span>, only the second one persists:</p><div class="terminal"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&gt; metas</span></p></td></tr><tr><td><p><span class="stt">'#hasheq((dog . "Lex") (here-path . "unsaved-editor"))</span></p></td></tr></table></div></div><p>What if you want to use a sequence of X-expression elements as a meta value? You can convert them into a single X-expression by wrapping them in a containing tag. You can use a new tag, or even just the <span class="RktSym"><a href="Core.html#%28form._%28%28lib._pollen%2Fcore..rkt%29._~40%29%29" class="RktStxLink" data-pltdoc="x">@</a></span> splicing tag:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="File_formats.html#%28mod-path._pollen%2Fmarkup%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen/markup</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><a href="Core.html#%28form._%28%28lib._pollen%2Fcore..rkt%29._define-meta%29%29" class="RktStxLink" data-pltdoc="x">define-meta</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="badlink"><span class="RktValLink">title</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym"><a href="Core.html#%28form._%28%28lib._pollen%2Fcore..rkt%29._~40%29%29" class="RktStxLink" data-pltdoc="x">@</a></span><span class="RktPn">{</span><span class="RktMeta">Conclusion</span><span class="hspace">&nbsp;</span><span class="RktMeta">to</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">em</span><span class="RktPn">{</span><span class="RktMeta">Infinity</span><span class="hspace">&nbsp;</span><span class="RktMeta">War</span><span class="RktPn">}</span><span class="RktPn">}</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">The</span><span class="hspace">&nbsp;</span><span class="RktMeta">title</span><span class="hspace">&nbsp;</span><span class="RktMeta">is</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><a href="Core.html#%28def._%28%28lib._pollen%2Fcore..rkt%29._select-from-metas%29%29" class="RktValLink" data-pltdoc="x">select-from-metas</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="badlink"><span class="RktValLink">'</span></span></span><span class="RktSym"><span class="badlink"><span class="RktValLink">title</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">metas</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote><blockquote class="SubFlow"><p><span class="RktVal"><span class="stt">'(root "The title is " "Conclusion to " (em "Infinity War"))</span></span></p></blockquote><p>To save a few keystrokes, you can consolidate multiple key&#8211;value pairs into one <span class="RktSym"><a href="Core.html#%28form._%28%28lib._pollen%2Fcore..rkt%29._define-meta%29%29" class="RktStxLink" data-pltdoc="x">define-meta</a></span> form. So this:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><a href="Core.html#%28form._%28%28lib._pollen%2Fcore..rkt%29._define-meta%29%29" class="RktStxLink" data-pltdoc="x">define-meta</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">dog</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"Roxy"</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><a href="Core.html#%28form._%28%28lib._pollen%2Fcore..rkt%29._define-meta%29%29" class="RktStxLink" data-pltdoc="x">define-meta</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">cat</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"Chopper"</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><a href="Core.html#%28form._%28%28lib._pollen%2Fcore..rkt%29._define-meta%29%29" class="RktStxLink" data-pltdoc="x">define-meta</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">ape</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"Koko"</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote><p>Is the same as this:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><a href="Core.html#%28form._%28%28lib._pollen%2Fcore..rkt%29._define-meta%29%29" class="RktStxLink" data-pltdoc="x">define-meta</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">dog</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"Roxy"</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">cat</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"Chopper"</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">ape</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"Koko"</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote><p>In both cases, the resulting metas look like this:</p><div class="terminal"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&gt; metas</span></p></td></tr><tr><td><p><span class="stt">'#hasheq((ape . "Koko") (cat . "Chopper") (dog . "Roxy") (here-path . "unsaved editor"))</span></p></td></tr></table></div></div><h5>12.3.1.5<tt>&nbsp;</tt><a name="(part._.Retrieving_metas)"></a>Retrieving metas</h5><p>The <span class="stt">metas</span> hashtable is available immediately within the body of your source file. You can use <span class="RktSym"><a href="Core.html#%28def._%28%28lib._pollen%2Fcore..rkt%29._select%29%29" class="RktValLink" data-pltdoc="x">select</a></span> to get values out of <span class="stt">metas</span>.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><a href="Core.html#%28form._%28%28lib._pollen%2Fcore..rkt%29._define-meta%29%29" class="RktStxLink" data-pltdoc="x">define-meta</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">dog</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"Roxy"</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><a href="Core.html#%28def._%28%28lib._pollen%2Fcore..rkt%29._select%29%29" class="RktValLink" data-pltdoc="x">select</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="badlink"><span class="RktValLink">'</span></span></span><span class="RktSym">dog</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">metas</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote><blockquote class="SubFlow"><p><span class="RktVal"><span class="stt">Roxy</span></span></p></blockquote><p><span class="stt">metas</span> is an immutable hash, so you can also use immutable-hash functions, like <span class="RktSym"><span class="badlink"><span class="RktValLink">hash-ref</span></span></span>:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><a href="Core.html#%28form._%28%28lib._pollen%2Fcore..rkt%29._define-meta%29%29" class="RktStxLink" data-pltdoc="x">define-meta</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">dog</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"Roxy"</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">hash-ref</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">metas</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="badlink"><span class="RktValLink">'</span></span></span><span class="RktSym">dog</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote><blockquote class="SubFlow"><p><span class="RktVal"><span class="stt">Roxy</span></span></p></blockquote><p>Because the metas are collected first, you can actually invoke a meta before you define it:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><a href="Core.html#%28def._%28%28lib._pollen%2Fcore..rkt%29._select%29%29" class="RktValLink" data-pltdoc="x">select</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="badlink"><span class="RktValLink">'</span></span></span><span class="RktSym">dog</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">metas</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><a href="Core.html#%28form._%28%28lib._pollen%2Fcore..rkt%29._define-meta%29%29" class="RktStxLink" data-pltdoc="x">define-meta</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">dog</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"Roxy"</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><a href="Core.html#%28form._%28%28lib._pollen%2Fcore..rkt%29._define-meta%29%29" class="RktStxLink" data-pltdoc="x">define-meta</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">dog</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"Spooky"</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote><blockquote class="SubFlow"><p><span class="RktVal"><span class="stt">Spooky</span></span></p></blockquote><p>This can be useful for setting up fields that you want to include in <span class="stt">metas</span> but also have visible in the body of a document, like a title.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="File_formats.html#%28mod-path._pollen%2Fmarkup%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen/markup</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><a href="Core.html#%28form._%28%28lib._pollen%2Fcore..rkt%29._define-meta%29%29" class="RktStxLink" data-pltdoc="x">define-meta</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="badlink"><span class="RktValLink">title</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"The</span><span class="hspace">&nbsp;</span><span class="RktVal">Amazing</span><span class="hspace">&nbsp;</span><span class="RktVal">Truth"</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">h1</span><span class="RktPn">{</span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><a href="Core.html#%28def._%28%28lib._pollen%2Fcore..rkt%29._select%29%29" class="RktValLink" data-pltdoc="x">select</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="badlink"><span class="RktValLink">'</span></span></span><span class="RktSym"><span class="badlink"><span class="RktValLink">title</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">metas</span><span class="RktPn">)</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr></table></blockquote><p>The result of this file will be:</p><blockquote class="SubFlow"><p><span class="RktVal"><span class="stt">'(root (h1 "The Amazing Truth"))</span></span></p></blockquote><p><div class="SIntrapara">And the metas:
</div><div class="SIntrapara"><div class="terminal"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&gt; metas</span></p></td></tr><tr><td><p><span class="stt">'#hasheq((title . "The Amazing Truth") (here-path . "unsaved-editor"))</span></p></td></tr></table></div></div></div></p><p><span style="font-weight: bold">Pro tip</span>: Within Pollen, the fastest way to get a <span class="stt">metas</span> hashtable from another source file is to use <span class="RktSym"><a href="Cache____.html#%28def._cache._%28%28lib._pollen%2Fcache..rkt%29._cached-metas%29%29" class="RktValLink" data-pltdoc="x">cached-metas</a></span>.</p><p><span style="font-weight: bold">Pro tip #2</span>: Outside Pollen, the <span class="stt">metas</span> hashtable is available when you import a Pollen source file in the usual way, but it&rsquo;s also made available through a submodule called, unsurprisingly, <span class="stt">metas</span>.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><font class="badlink"><span class="RktModLink"><span class="RktSym">racket/base</span></span></font><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">require</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"path/to/your-pollen-source"</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktCmt">;</span><span class="hspace">&nbsp;</span><span class="RktCmt">doc</span><span class="hspace">&nbsp;</span><span class="RktCmt">and</span><span class="hspace">&nbsp;</span><span class="RktCmt">metas</span><span class="hspace">&nbsp;</span><span class="RktCmt">and</span><span class="hspace">&nbsp;</span><span class="RktCmt">everything</span><span class="hspace">&nbsp;</span><span class="RktCmt">else</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">require</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">submod</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"path/to/your-pollen-source"</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">metas</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktCmt">;</span><span class="hspace">&nbsp;</span><span class="RktCmt">just</span><span class="hspace">&nbsp;</span><span class="RktCmt">metas</span><span class="RktMeta"></span></td></tr></table></blockquote><p>The <span class="stt">metas</span> submodule gives you access to the <span class="stt">metas</span> hashtable <span style="font-style: italic">without</span> compiling the rest of the file. So if you need to harvest metas from a set of source files &#8212;&#160;for instance, page titles (for a table of contents) or categories &#8212; using <span class="RktSym"><span class="badlink"><span class="RktValLink">require</span></span></span> with the submodule will be faster.</p><p><span style="font-weight: bold">Pro tip #3</span>: Within a tag function, you can access the metas of the source currently being evaluated with <span class="RktSym"><a href="Core.html#%28def._%28%28lib._pollen%2Fcore..rkt%29._current-metas%29%29" class="RktValLink" data-pltdoc="x">current-metas</a></span>.</p><h5>12.3.1.6<tt>&nbsp;</tt><a name="(part._.Inserting_a_comment)"></a>Inserting a comment</h5><p>Two options.</p><p>To comment out the rest of a single line, use a lozenge followed by a semicolon <span class="RktInBG"><span class="hspace"></span><span class="RktIn">&#9674;;</span><span class="hspace"></span></span>.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">span</span><span class="RktPn">{</span><span class="RktMeta">This</span><span class="hspace">&nbsp;</span><span class="RktMeta">is</span><span class="hspace">&nbsp;</span><span class="RktMeta">not</span><span class="hspace">&nbsp;</span><span class="RktMeta">a</span><span class="hspace">&nbsp;</span><span class="RktMeta">comment</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">span</span><span class="RktPn">{</span><span class="RktMeta">Nor</span><span class="hspace">&nbsp;</span><span class="RktMeta">is</span><span class="hspace">&nbsp;</span><span class="RktMeta">this</span><span class="RktPn">}</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktCmt">&#9674;;span{But</span><span class="hspace">&nbsp;</span><span class="RktCmt">this</span><span class="hspace">&nbsp;</span><span class="RktCmt">is}</span><span class="RktMeta"></span></td></tr></table></blockquote><blockquote class="SubFlow"><p><span class="RktVal"><span class="stt">'(span "This is not a comment")<br/>'(span "Nor is this")</span></span></p></blockquote><p>To comment out a multiline block, use the lozenge&#8211;semicolon signal <span class="RktInBG"><span class="hspace"></span><span class="RktIn">&#9674;;</span><span class="hspace"></span></span> with curly braces, <span class="RktInBG"><span class="hspace"></span><span class="RktIn">&#9674;;{</span><span class="hspace"></span></span>like so<span class="RktInBG"><span class="hspace"></span><span class="RktIn">}</span><span class="hspace"></span></span>.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktCmt">&#9674;;</span><span class="RktPn">{</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktMeta">span</span><span class="RktPn">{</span><span class="RktMeta">This</span><span class="hspace">&nbsp;</span><span class="RktMeta">is</span><span class="hspace">&nbsp;</span><span class="RktMeta">not</span><span class="hspace">&nbsp;</span><span class="RktMeta">a</span><span class="hspace">&nbsp;</span><span class="RktMeta">comment</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktMeta">span</span><span class="RktPn">{</span><span class="RktMeta">Nor</span><span class="hspace">&nbsp;</span><span class="RktMeta">is</span><span class="hspace">&nbsp;</span><span class="RktMeta">this</span><span class="RktPn">}</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktCmt">&#9674;;span{But</span><span class="hspace">&nbsp;</span><span class="RktCmt">this</span><span class="hspace">&nbsp;</span><span class="RktCmt">is}</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">Actually,</span><span class="hspace">&nbsp;</span><span class="RktMeta">it's</span><span class="hspace">&nbsp;</span><span class="RktMeta">all</span><span class="hspace">&nbsp;</span><span class="RktMeta">a</span><span class="hspace">&nbsp;</span><span class="RktMeta">comment</span><span class="hspace">&nbsp;</span><span class="RktMeta">now</span><span class="RktMeta"></span></td></tr></table></blockquote><blockquote class="SubFlow"><p><span class="RktVal"><span class="stt">Actually, it's all a comment now</span></span></p></blockquote><h5>12.3.2<tt>&nbsp;</tt><a name="(part._.The_.Racket_arguments)"></a>The Racket arguments</h5><p>The middle part of a Pollen-style command contains the <span style="font-style: italic">Racket arguments</span> <span class="RktInBG"><span class="hspace"></span><span class="RktIn">[</span><span class="hspace"></span></span>between square brackets.<span class="RktInBG"><span class="hspace"></span><span class="RktIn">]</span><span class="hspace"></span></span> Most often, you&rsquo;ll see these used to pass extra information to commands that operate on text.</p><p>For instance, tag functions. Recall from before that any not-yet-defined command name in Pollen is treated as a tag function:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">title</span></span></span><span class="RktPn">{</span><span class="RktMeta">The</span><span class="hspace">&nbsp;</span><span class="RktMeta">Beginning</span><span class="hspace">&nbsp;</span><span class="RktMeta">of</span><span class="hspace">&nbsp;</span><span class="RktMeta">the</span><span class="hspace">&nbsp;</span><span class="RktMeta">End</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr></table></blockquote><blockquote class="SubFlow"><p><span class="RktVal"><span class="stt">'(title "The Beginning of the End")</span></span></p></blockquote><p>But what if you wanted to add attributes to this tag, so that it comes out like this?</p><blockquote class="SubFlow"><p><span class="RktVal"><span class="stt">'(title ((class "red")(id "first")) "The Beginning of the End")</span></span></p></blockquote><p>You can do it with Racket arguments.</p><p>Here&rsquo;s the hard way. You can type out your list of attributes in Racket format and drop them into the brackets as a single argument:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">title</span></span></span><span class="RktPn">[</span><span class="RktSym"><span class="badlink"><span class="RktValLink">'</span></span></span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">class</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"red"</span><span class="RktPn">)</span><span class="RktPn">(</span><span class="RktSym">id</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"first"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">{</span><span class="RktMeta">The</span><span class="hspace">&nbsp;</span><span class="RktMeta">Beginning</span><span class="hspace">&nbsp;</span><span class="RktMeta">of</span><span class="hspace">&nbsp;</span><span class="RktMeta">the</span><span class="hspace">&nbsp;</span><span class="RktMeta">End</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr></table></blockquote><blockquote class="SubFlow"><p><span class="RktVal"><span class="stt">'(title ((class "red") (id "first")) "The Beginning of the End")</span></span></p></blockquote><p>But that&rsquo;s a lot of parentheses to think about. So here&rsquo;s the easy way. Whenever you use a tag function, there&rsquo;s a shortcut for inserting attributes. You can enter them as a series of <span style="font-style: italic">keyword arguments</span> between the Racket-argument brackets. The only caveat is that the values for these keyword arguments have to be strings. So taken together, they look like this:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">title</span></span></span><span class="RktPn">[</span><span class="RktPn">#:class</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"red"</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">#:id</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"first"</span><span class="RktPn">]</span><span class="RktPn">{</span><span class="RktMeta">The</span><span class="hspace">&nbsp;</span><span class="RktMeta">Beginning</span><span class="hspace">&nbsp;</span><span class="RktMeta">of</span><span class="hspace">&nbsp;</span><span class="RktMeta">the</span><span class="hspace">&nbsp;</span><span class="RktMeta">End</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr></table></blockquote><blockquote class="SubFlow"><p><span class="RktVal"><span class="stt">'(title ((class "red") (id "first")) "The Beginning of the End")</span></span></p></blockquote><p>The string arguments can be any valid Racket expressions that produce strings. For instance, this will also work:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">title</span></span></span><span class="RktPn">[</span><span class="RktPn">#:class</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">number-&gt;string</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">*</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">6</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">7</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">#:id</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"first"</span><span class="RktPn">]</span><span class="RktPn">{</span><span class="RktMeta">The</span><span class="hspace">&nbsp;</span><span class="RktMeta">Beginning</span><span class="hspace">&nbsp;</span><span class="RktMeta">of</span><span class="hspace">&nbsp;</span><span class="RktMeta">the</span><span class="hspace">&nbsp;</span><span class="RktMeta">End</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr></table></blockquote><blockquote class="SubFlow"><p><span class="RktVal"><span class="stt">'(title ((class "42") (id "first")) "The Beginning of the End")</span></span></p></blockquote><p>Since Pollen commands are really just Racket arguments underneath, you can use those too. Here, we&rsquo;ll define a variable called <span class="RktSym">name</span><span class="RktMeta"></span> and use it in the Racket arguments of <span class="RktSym"><span class="badlink"><span class="RktValLink">title</span></span></span><span class="RktMeta"></span>:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">name</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"Brennan"</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">title</span></span></span><span class="RktPn">[</span><span class="RktPn">#:class</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"red"</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">#:id</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">name</span><span class="RktPn">]</span><span class="RktPn">{</span><span class="RktMeta">The</span><span class="hspace">&nbsp;</span><span class="RktMeta">Beginning</span><span class="hspace">&nbsp;</span><span class="RktMeta">of</span><span class="hspace">&nbsp;</span><span class="RktMeta">the</span><span class="hspace">&nbsp;</span><span class="RktMeta">End</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr></table></blockquote><blockquote class="SubFlow"><p><span class="RktVal"><span class="stt">'(title ((class "read") (id "Brennan")) "The Beginning of the End")</span></span></p></blockquote><p>When used in custom tag functions, keyword arguments don&rsquo;t have to represent attributes. Instead, they can be used to provide options for a particular Pollen command, to avoid redundancy. Suppose that instead of using the <span class="RktSym">h1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="badlink"><span class="RktValLink">...</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">h6</span><span class="RktMeta"></span> tags, you want to consolidate them into one command called <span class="RktSym">heading</span><span class="RktMeta"></span> and select the level separately. You can do this with a keyword, in this case <span class="RktPn">#:level</span>, which is passed as a Racket argument:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">heading</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">#:level</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">which</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">text</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="badlink"><span class="RktValLink">`</span></span></span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">,</span></span></span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">string-&gt;symbol</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">format</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"h~a"</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">which</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="badlink"><span class="RktValLink">,</span></span></span><span class="RktSym">text</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">heading</span><span class="RktPn">[</span><span class="RktPn">#:level</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1</span><span class="RktPn">]</span><span class="RktPn">{</span><span class="RktMeta">Major</span><span class="hspace">&nbsp;</span><span class="RktMeta">league</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">heading</span><span class="RktPn">[</span><span class="RktPn">#:level</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">2</span><span class="RktPn">]</span><span class="RktPn">{</span><span class="RktMeta">Minor</span><span class="hspace">&nbsp;</span><span class="RktMeta">league</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">heading</span><span class="RktPn">[</span><span class="RktPn">#:level</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">6</span><span class="RktPn">]</span><span class="RktPn">{</span><span class="RktMeta">Trivial</span><span class="hspace">&nbsp;</span><span class="RktMeta">league</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr></table></blockquote><blockquote class="SubFlow"><p><span class="RktVal"><span class="stt">'(h1 "Major league")<br/>'(h2 "Minor league")<br/>'(h6 "Trivial league")</span></span></p></blockquote><p><span style="font-weight: bold">Pro tip</span>: See also <span class="RktSym"><a href="Tag.html#%28form._%28%28lib._pollen%2Ftag..rkt%29._define-tag-function%29%29" class="RktStxLink" data-pltdoc="x">define-tag-function</a></span>, which automatically converts keyword arguments into attributes before they reach your function:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">require</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">pollen/tag</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><a href="Tag.html#%28form._%28%28lib._pollen%2Ftag..rkt%29._define-tag-function%29%29" class="RktStxLink" data-pltdoc="x">define-tag-function</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">heading</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">attrs</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">elems</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">level</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">cadr</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">assq</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="badlink"><span class="RktValLink">'</span></span></span><span class="RktSym">level</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">attrs</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="badlink"><span class="RktValLink">`</span></span></span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">,</span></span></span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">string-&gt;symbol</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">format</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"h~a"</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">level</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="badlink"><span class="RktValLink">,@</span></span></span><span class="RktSym">elems</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">heading</span><span class="RktPn">[</span><span class="RktPn">#:level</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1</span><span class="RktPn">]</span><span class="RktPn">{</span><span class="RktMeta">Major</span><span class="hspace">&nbsp;</span><span class="RktMeta">league</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">heading</span><span class="RktPn">[</span><span class="RktPn">#:level</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">2</span><span class="RktPn">]</span><span class="RktPn">{</span><span class="RktMeta">Minor</span><span class="hspace">&nbsp;</span><span class="RktMeta">league</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">heading</span><span class="RktPn">[</span><span class="RktPn">#:level</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">6</span><span class="RktPn">]</span><span class="RktPn">{</span><span class="RktMeta">Trivial</span><span class="hspace">&nbsp;</span><span class="RktMeta">league</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr></table></blockquote><blockquote class="SubFlow"><p><span class="RktVal"><span class="stt">'(h1 "Major league")<br/>'(h2 "Minor league")<br/>'(h6 "Trivial league")</span></span></p></blockquote><h5>12.3.3<tt>&nbsp;</tt><a name="(part._the-text-body)"></a>The text body</h5><p>The third part of a Pollen-style command is the text body. The text body <span class="RktInBG"><span class="hspace"></span><span class="RktIn">{</span><span class="hspace"></span></span>appears between curly braces<span class="RktInBG"><span class="hspace"></span><span class="RktIn">}</span><span class="hspace"></span></span>. It can contain any text you want. The text body can also contain other Pollen commands with their own text body. And they can contain other Pollen commands ... and so on, all the way down.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">div</span><span class="RktPn">{</span><span class="RktMeta">Do</span><span class="hspace">&nbsp;</span><span class="RktMeta">it</span><span class="hspace">&nbsp;</span><span class="RktMeta">again.</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">div</span><span class="RktPn">{</span><span class="RktMeta">And</span><span class="hspace">&nbsp;</span><span class="RktMeta">again.</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">div</span><span class="RktPn">{</span><span class="RktMeta">And</span><span class="hspace">&nbsp;</span><span class="RktMeta">yet</span><span class="hspace">&nbsp;</span><span class="RktMeta">again.</span><span class="RktPn">}</span><span class="RktPn">}</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr></table></blockquote><blockquote class="SubFlow"><p><span class="RktVal"><span class="stt">'(div "Do it again. " (div "And again. " (div "And yet again.")))</span></span></p></blockquote><p>Three things to know about the text body.</p><p>First, the only character that needs special handling in the text body is the lozenge <span class="RktInBG"><span class="hspace"></span><span class="RktIn">&#9674;</span><span class="hspace"></span></span>. A lozenge ordinarily marks a new command. So if you want an actual lozenge to appear in the text, you have to escape it by typing <span class="RktInBG"><span class="hspace"></span><span class="RktIn">&#9674;"&#9674;"</span><span class="hspace"></span></span>.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">definition</span><span class="RktPn">{</span><span class="RktMeta">This</span><span class="hspace">&nbsp;</span><span class="RktMeta">is</span><span class="hspace">&nbsp;</span><span class="RktMeta">the</span><span class="hspace">&nbsp;</span><span class="RktMeta">lozenge:</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktVal">"&#9674;"</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr></table></blockquote><blockquote class="SubFlow"><p><span class="RktVal"><span class="stt">'(definition "This is the lozenge: &#9674;")</span></span></p></blockquote><p>Second, the whitespace-trimming policy. Here&rsquo;s the short version: if there&rsquo;s a newline at either end of the text body, it is trimmed, and whitespace at the end of each line is selectively trimmed in an intelligent way. So this text body, with newlines on the ends:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">div</span><span class="RktPn">{</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">Roomy!</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">I</span><span class="hspace">&nbsp;</span><span class="RktMeta">agree.</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr></table></blockquote><blockquote class="SubFlow"><p><span class="RktVal"><span class="stt">'(div "Roomy!" "\n" "\n" "I agree.")</span></span></p></blockquote><p>Yields the same result as this one, without the newlines:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">div</span><span class="RktPn">{</span><span class="RktMeta">Roomy!</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">I</span><span class="hspace">&nbsp;</span><span class="RktMeta">agree.</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr></table></blockquote><blockquote class="SubFlow"><p><span class="RktVal"><span class="stt">'(div "Roomy!" "\n" "\n" "I agree.")</span></span></p></blockquote><p>For the long version, please see <font class="badlink">(part ("(lib scribblings/scribble/scribble.scrbl)" "Spaces__Newlines__and_Indentation"))</font>.</p><p>Third, within a multiline text body, newline characters become individual strings that are not merged with adjacent text. So what you end up with is a list of strings, not a single string. That&rsquo;s why in the last example, we got this:</p><blockquote class="SubFlow"><p><span class="RktVal"><span class="stt">'(div "Roomy!" "\n" "\n" "I agree.")</span></span></p></blockquote><p>Instead of this:</p><blockquote class="SubFlow"><p><span class="RktVal"><span class="stt">'(div "Roomy!\n\nI agree.")</span></span></p></blockquote><p>Under most circumstances, these two tagged X-expressions will behave the same way. The biggest exception is with functions. A function that might operate on a multiline text body needs to be able to handle an indefinite number of strings. For instance, this <span class="RktSym">jejune</span><span class="RktMeta"></span> function only accepts a single argument. It will work with a single-line text body, because that produces a single string:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">jejune</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">text</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="badlink"><span class="RktValLink">`</span></span></span><span class="RktPn">(</span><span class="RktSym">jejune</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="badlink"><span class="RktValLink">,</span></span></span><span class="RktSym">text</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">jejune</span><span class="RktPn">{</span><span class="RktMeta">Irrational</span><span class="hspace">&nbsp;</span><span class="RktMeta">confidence</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr></table></blockquote><blockquote class="SubFlow"><p><span class="RktVal"><span class="stt">'(jejune "Irrational confidence")</span></span></p></blockquote><p>But watch what happens with a multiline text body:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">jejune</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">text</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="badlink"><span class="RktValLink">`</span></span></span><span class="RktPn">(</span><span class="RktSym">jejune</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="badlink"><span class="RktValLink">,</span></span></span><span class="RktSym">text</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">jejune</span><span class="RktPn">{</span><span class="RktMeta">Deeply</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">chastened</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr></table></blockquote><blockquote class="SubFlow"><p><span class="RktErr"><span class="stt">jejune: arity mismatch;<br/>the expected number of arguments does not match the given number<br/>&#160;&#160;expected: 1<br/>&#160;&#160;given: 3<br/>&#160;&#160;arguments...:<br/>&#160;&#160;&#160;"Deeply"<br/>&#160;&#160;&#160;"\n"<br/>&#160;&#160;&#160;"chastened"</span></span></p></blockquote><p>The answer is to use a <span style="font-style: italic">rest argument</span> in the function, which takes the &ldquo;rest&rdquo; of the arguments &#8212;&#160;however many there may be &#8212;&#160;and combines them into a single <span class="RktSym"><span class="badlink"><span class="RktValLink">list</span></span></span>. If we rewrite  <span class="RktSym">jejune</span><span class="RktMeta"></span> with a rest argument, we can fix the problem:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">jejune</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">.</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">texts</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="badlink"><span class="RktValLink">`</span></span></span><span class="RktPn">(</span><span class="RktSym">jejune</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="badlink"><span class="RktValLink">,@</span></span></span><span class="RktSym">texts</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">jejune</span><span class="RktPn">{</span><span class="RktMeta">Deeply</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">chastened</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr></table></blockquote><blockquote class="SubFlow"><p><span class="RktVal"><span class="stt">'(jejune "Deeply" "\n" "chastened")</span></span></p></blockquote><h4>12.4<tt>&nbsp;</tt><a name="(part._.Embedding_character_entities)"></a>Embedding character entities</h4><p>XML and HTML support <span style="font-style: italic">character entities</span>, a way of encoding Unicode characters with a name or number. For instance, in HTML, the copyright symbol <span class="RktInBG"><span class="hspace"></span><span class="RktIn">&#169;</span><span class="hspace"></span></span> can be encoded by name as <span class="stt">&amp;copy;</span> or by number as <span class="stt">&amp;#169;</span>.</p><p>Entities originated as a way of embedding Unicode characters in an ASCII data stream. Pollen and Racket, however, support Unicode directly. So does every major web browser (though your document may need a Unicode character-set declaration to trigger it). So usually, your best bet is insert Unicode characters directly into your source rather than use entities.</p><p>But if you really need entities, here&rsquo;s what to do. Pollen treats everything as text by default, so you can&rsquo;t insert entities merely by typing them, because they&rsquo;ll just be converted to text:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">div</span><span class="RktPn">{</span><span class="RktMeta">copy</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">169</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr></table></blockquote><blockquote class="SubFlow"><p><span class="RktVal"><span class="stt">'(div "copy" "\n" "169")</span></span></p></blockquote><p>Instead, named entities are handled as <font class="badlink">(part ("(lib scribblings/guide/guide.scrbl)" "symbols"))</font> and numeric entities are, unsurprisingly, <font class="badlink">(part ("(lib scribblings/guide/guide.scrbl)" "numbers"))</font>. So you can use the <span class="RktSym"><span class="badlink"><span class="RktValLink">string-&gt;symbol</span></span></span> and <span class="RktSym"><span class="badlink"><span class="RktValLink">string-&gt;number</span></span></span> functions to convert your entity input:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">div</span><span class="RktPn">{</span><span class="RktPn">&#9674;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">string-&gt;symbol</span></span></span><span class="RktPn">{</span><span class="RktMeta">copy</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">string-&gt;number</span></span></span><span class="RktPn">{</span><span class="RktMeta">169</span><span class="RktPn">}</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr></table></blockquote><blockquote class="SubFlow"><p><span class="RktVal"><span class="stt">'(div copy "\n" 169)</span></span></p></blockquote><p>Notice that in the output, there are no more quote marks around <span class="stt">copy</span> and <span class="stt">169</span>, indicating that they&rsquo;re not strings. When you pass this result to a converter like <span class="RktSym"><a href="Template.html#%28def._%28%28lib._pollen%2Ftemplate%2Fhtml..rkt%29._-~3ehtml%29%29" class="RktValLink" data-pltdoc="x"><span class="nobreak">-&gt;</span>html</a></span>, the entities will be escaped correctly:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">require</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">pollen/template</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym"><a href="Template.html#%28def._%28%28lib._pollen%2Ftemplate%2Fhtml..rkt%29._-~3ehtml%29%29" class="RktValLink" data-pltdoc="x"><span class="nobreak">-&gt;</span>html</a></span><span class="RktPn">{</span><span class="RktPn">&#9674;</span><span class="RktSym">div</span><span class="RktPn">{</span><span class="RktMeta">copy</span><span class="hspace">&nbsp;</span><span class="RktMeta">169</span><span class="RktPn">}</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym"><a href="Template.html#%28def._%28%28lib._pollen%2Ftemplate%2Fhtml..rkt%29._-~3ehtml%29%29" class="RktValLink" data-pltdoc="x"><span class="nobreak">-&gt;</span>html</a></span><span class="RktPn">{</span><span class="RktPn">&#9674;</span><span class="RktSym">div</span><span class="RktPn">{</span><span class="RktPn">&#9674;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">string-&gt;symbol</span></span></span><span class="RktPn">{</span><span class="RktMeta">copy</span><span class="RktPn">}</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">string-&gt;number</span></span></span><span class="RktPn">{</span><span class="RktMeta">169</span><span class="RktPn">}</span><span class="RktPn">}</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr></table></blockquote><blockquote class="SubFlow"><p><span class="RktVal"><span class="stt">&lt;div&gt;copy 169&lt;/div&gt;<br/><br/>&lt;div&gt;&amp;copy; &amp;#169;&lt;/div&gt;</span></span></p></blockquote><p>For numeric entities, you can also use a four-digit Unicode hex number by prefacing it with <span class="RktInBG"><span class="hspace"></span><span class="RktIn">#x</span><span class="hspace"></span></span>, which is the standard Racket prefix for a hex number:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">div</span><span class="RktPn">{</span><span class="RktPn">&#9674;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">string-&gt;number</span></span></span><span class="RktPn">{</span><span class="RktMeta">169</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">string-&gt;number</span></span></span><span class="RktPn">{</span><span class="RktMeta">#x00a9</span><span class="RktPn">}</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr></table></blockquote><blockquote class="SubFlow"><p><span class="RktVal"><span class="stt">'(div 169 "\n" 169)</span></span></p></blockquote><p>Of course, you don&rsquo;t need to use <span class="RktSym"><span class="badlink"><span class="RktValLink">string-&gt;symbol</span></span></span> and <span class="RktSym"><span class="badlink"><span class="RktValLink">string-&gt;number</span></span></span> directly in your source. You can also define tag functions that generate entities. The key point is that to be treated as an entity, the return value must be a symbol or number, rather than a string.</p><h4>12.5<tt>&nbsp;</tt><a name="(part._.Adding_.Pollen-style_commands_to_a_.Racket_file)"></a><a name="(mod-path._pollen/mode)"></a>Adding Pollen-style commands to a Racket file</h4><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="hspace">&nbsp;</span><a href="#%28mod-path._pollen%2Fmode%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen/mode</span></a></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/pollen" title="Install this package using `raco pkg install pollen`"><span class="stt">pollen</span></a></span></td></tr></table></p><p>Just as you can embed any Racket-style command in a Pollen source file, you can go the other way and embed Pollen-style commands in a Racket file. Just insert <a href="#%28mod-path._pollen%2Fmode%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen/mode</span></a> in the <span class="stt">#lang</span> line at the top of your source:</p><div class="fileblock"><div class="SIntrapara"><div class="fileblockFiletitle"><span class="fileblockFilename"><span class="stt">"pollen.rkt"</span></span></div></div><div class="SIntrapara"><div class="fileblockFilecontent"><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="#%28mod-path._pollen%2Fmode%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen/mode</span></a><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">racket/base</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">require</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">pollen/tag</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="badlink"><span class="RktValLink">link</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="Tag.html#%28def._%28%28lib._pollen%2Ftag..rkt%29._default-tag-function%29%29" class="RktValLink" data-pltdoc="x">default-tag-function</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="badlink"><span class="RktValLink">'</span></span></span><span class="RktSym">a</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">home-link</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">link</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">#:href</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"index.html"</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"Click</span><span class="hspace">&nbsp;</span><span class="RktVal">to</span><span class="hspace">&nbsp;</span><span class="RktVal">go</span><span class="hspace">&nbsp;</span><span class="RktVal">home"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">home-link-pollen-style</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">link</span></span></span><span class="RktPn">[</span><span class="RktPn">#:href</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"index.html"</span><span class="RktPn">]</span><span class="RktPn">{</span><span class="RktMeta">Click</span><span class="hspace">&nbsp;</span><span class="RktMeta">to</span><span class="hspace">&nbsp;</span><span class="RktMeta">go</span><span class="hspace">&nbsp;</span><span class="RktMeta">home</span><span class="RktPn">}</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr></table></blockquote></div></div></div></div><p>Here, both <span class="stt">(home-link)</span> and <span class="stt">(home-link-pollen-style)</span> will produce the same X-expression as a result:</p><div class="terminal"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">'(a ((href "index.html")) "Click to go home")</span></p></td></tr></table></div></div><p>Of course, you can use <a href="#%28mod-path._pollen%2Fmode%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen/mode</span></a> in any Racket source file, not just <span class="stt">"pollen.rkt"</span>.</p><p><span style="font-weight: bold">Major caveat</span>: <a href="#%28mod-path._pollen%2Fmode%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen/mode</span></a> only works with Pollen&rsquo;s default command character, namely the lozenge (<span class="RktInBG"><span class="hspace"></span><span class="RktIn">&#9674;</span><span class="hspace"></span></span>). If you&rsquo;ve overridden this command character in your <span class="stt">"pollen.rkt"</span> file, your custom command character will work everywhere <span style="font-style: italic">except</span> in <a href="#%28mod-path._pollen%2Fmode%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen/mode</span></a>. This limitation is necessary to prevent the intractable situation where <span class="stt">"pollen.rkt"</span> relies on <a href="#%28mod-path._pollen%2Fmode%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen/mode</span></a>, but <a href="#%28mod-path._pollen%2Fmode%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen/mode</span></a> relies on a config setting in <span class="stt">"pollen.rkt"</span>.</p><p>Also keep in mind that <a href="#%28mod-path._pollen%2Fmode%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen/mode</span></a> is just a syntactic convenience. It doesn&rsquo;t change any of the underlying semantics of your Racket source file. Your Pollen-style commands are being translated into Racket commands and compiled along with everything else.</p><p>Another good way to use Pollen-style commands in Racket is for unit tests with <font class="badlink"><span class="RktModLink"><span class="RktSym">rackunit</span></span></font>. With <a href="#%28mod-path._pollen%2Fmode%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen/mode</span></a>, you can write your unit tests in Pollen style or Racket style (or mix them). This makes it easy to verify that Pollen-style commands will turn into the Racket values that you expect:</p><div class="fileblock"><div class="SIntrapara"><div class="fileblockFiletitle"><span class="fileblockFilename"><span class="stt">"pollen.rkt"</span></span></div></div><div class="SIntrapara"><div class="fileblockFilecontent"><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="#%28mod-path._pollen%2Fmode%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen/mode</span></a><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">racket/base</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">require</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">rackunit</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">tag-fn</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">arg</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">.</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">text-args</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="badlink"><span class="RktValLink">`</span></span></span><span class="RktPn">(</span><span class="RktSym">div</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">class</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="badlink"><span class="RktValLink">,</span></span></span><span class="RktSym">arg</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="badlink"><span class="RktValLink">,@</span></span></span><span class="RktSym">text-args</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">check-equal?</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">tag-fn</span><span class="RktPn">[</span><span class="RktVal">"42"</span><span class="RktPn">]</span><span class="RktPn">{</span><span class="RktMeta">hello</span><span class="hspace">&nbsp;</span><span class="RktMeta">world</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="badlink"><span class="RktValLink">'</span></span></span><span class="RktPn">(</span><span class="RktSym">div</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">class</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"42"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"hello</span><span class="hspace">&nbsp;</span><span class="RktVal">world"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">check-equal?</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">tag-fn</span><span class="RktMeta">&#160;</span><span class="RktVal">"42"</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"hello</span><span class="hspace">&nbsp;</span><span class="RktVal">world"</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="badlink"><span class="RktValLink">'</span></span></span><span class="RktPn">(</span><span class="RktSym">div</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">class</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"42"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"hello</span><span class="hspace">&nbsp;</span><span class="RktVal">world"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">check-equal?</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">tag-fn</span><span class="RktPn">[</span><span class="RktVal">"42"</span><span class="RktPn">]</span><span class="RktPn">{</span><span class="RktMeta">hello</span><span class="hspace">&nbsp;</span><span class="RktMeta">world</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">'</span></span></span><span class="RktSym">div</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">class</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"42"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">{</span><span class="RktMeta">hello</span><span class="hspace">&nbsp;</span><span class="RktMeta">world</span><span class="RktPn">}</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr></table></blockquote></div></div></div></div><h4>12.6<tt>&nbsp;</tt><a name="(part._.Further_reading)"></a>Further reading</h4><p>The Pollen language is a variant of Racket&rsquo;s own text-processing language, called Scribble. Thus, most things that can be done with Scribble syntax can also be done with Pollen syntax. For the sake of clarity &amp; brevity, I&rsquo;ve only shown you the highlights here. But if you want the full story, see <font class="badlink">(part ("(lib scribblings/scribble/scribble.scrbl)" "reader"))</font> in the Scribble documentation.</p><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="File_formats.html" title="backward to &quot;11 File formats&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot; Pollen :这本书是一个程序&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="programming-pollen.html" title="forward to &quot;13 Programming Pollen&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>