<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>2&nbsp;Quick tour</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="mb.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x"> Pollen :<span class="mywbr"> &nbsp;</span>&#36825;&#26412;&#20070;&#26159;&#19968;&#20010;&#31243;&#24207;</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="Installation.html" class="tocviewlink" data-pltdoc="x">Installation</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Quick tour</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="____.html" class="tocviewlink" data-pltdoc="x">&#32972;&#26223;&#25925;&#20107;</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="big-picture.html" class="tocviewlink" data-pltdoc="x">&#24635;&#35272;</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="first-tutorial.html" class="tocviewlink" data-pltdoc="x">&#31532;&#19968;&#20010;&#25945;&#31243;&#65306;&#39033;&#30446;&#26381;&#21153;&#22120;&#21644;&#39044;&#22788;&#29702;&#22120;</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="second-tutorial.html" class="tocviewlink" data-pltdoc="x">&#31532;&#20108;&#20010;&#25945;&#31243;&#65306;Markdown&#12289;&#27169;&#26495;&#21644;&#39029;&#38754;&#26641;</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="third-tutorial.html" class="tocviewlink" data-pltdoc="x">&#31532;&#19977;&#20010;&#25945;&#31243;&#65306; Pollen &#26631;&#35760;&#21644;&#26631;&#31614;&#20989;&#25968;</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="fourth-tutorial.html" class="tocviewlink" data-pltdoc="x">&#31532;&#22235;&#20010;&#25945;&#31243;&#65306;&#22810;&#20010;&#36755;&#20986;&#30446;&#26631;</a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="mini-tutorial.html" class="tocviewlink" data-pltdoc="x">&#19968;&#20123;&#29420;&#31435;&#30340;&#23567;&#25945;&#31243;</a></td></tr><tr><td align="right">10&nbsp;</td><td><a href="raco-pollen.html" class="tocviewlink" data-pltdoc="x">&#20351;&#29992; <span class="stt">raco pollen</span> &#21629;&#20196;</a></td></tr><tr><td align="right">11&nbsp;</td><td><a href="File_formats.html" class="tocviewlink" data-pltdoc="x">File formats</a></td></tr><tr><td align="right">12&nbsp;</td><td><a href="pollen-command-syntax.html" class="tocviewlink" data-pltdoc="x">Pollen command syntax</a></td></tr><tr><td align="right">13&nbsp;</td><td><a href="programming-pollen.html" class="tocviewlink" data-pltdoc="x">Programming Pollen</a></td></tr><tr><td align="right">14&nbsp;</td><td><a href="Module_reference.html" class="tocviewlink" data-pltdoc="x">Module reference</a></td></tr><tr><td align="right">15&nbsp;</td><td><a href="Unstable_module_reference.html" class="tocviewlink" data-pltdoc="x">Unstable module reference</a></td></tr><tr><td align="right">16&nbsp;</td><td><a href="Acknowledgments.html" class="tocviewlink" data-pltdoc="x">Acknowledgments</a></td></tr><tr><td align="right">17&nbsp;</td><td><a href="License___source_code.html" class="tocviewlink" data-pltdoc="x">License &amp; source code</a></td></tr><tr><td align="right">18&nbsp;</td><td><a href="version-notes.html" class="tocviewlink" data-pltdoc="x">Version notes (3.2.3136.1057)</a></td></tr><tr><td align="right"></td><td><a href="doc-index.html" class="tocviewlink" data-pltdoc="x">Index</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>2&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Quick tour</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">2.1&nbsp;</td><td><a href="#%28part._.Creating_a_source_file%29" class="tocviewlink" data-pltdoc="x">Creating a source file</a></td></tr><tr><td align="right">2.2&nbsp;</td><td><a href="#%28part._.Running_a_source_file%29" class="tocviewlink" data-pltdoc="x">Running a source file</a></td></tr><tr><td align="right">2.3&nbsp;</td><td><a href="#%28part._.Naming__saving__and_rendering_a_source_file%29" class="tocviewlink" data-pltdoc="x">Naming, saving, and rendering a source file</a></td></tr><tr><td align="right">2.4&nbsp;</td><td><a href="#%28part._.The_project_server%29" class="tocviewlink" data-pltdoc="x">The project server</a></td></tr><tr><td align="right">2.5&nbsp;</td><td><a href="#%28part._.Intermission%29" class="tocviewlink" data-pltdoc="x">Intermission</a></td></tr><tr><td align="right">2.6&nbsp;</td><td><a href="#%28part._.Pollen_as_a_preprocessor%29" class="tocviewlink" data-pltdoc="x">Pollen as a preprocessor</a></td></tr><tr><td align="right">2.7&nbsp;</td><td><a href="#%28part._.Markdown_mode%29" class="tocviewlink" data-pltdoc="x">Markdown mode</a></td></tr><tr><td align="right">2.8&nbsp;</td><td><a href="#%28part._.Pollen_markup%29" class="tocviewlink" data-pltdoc="x">Pollen markup</a></td></tr><tr><td align="right">2.9&nbsp;</td><td><a href="#%28part._.Templates%29" class="tocviewlink" data-pltdoc="x">Templates</a></td></tr><tr><td align="right">2.10&nbsp;</td><td><a href="#%28part._.P.S_for_.Scribble_users%29" class="tocviewlink" data-pltdoc="x">PS for Scribble users</a></td></tr><tr><td align="right">2.11&nbsp;</td><td><a href="#%28part._.The_end_of_the_beginning%29" class="tocviewlink" data-pltdoc="x">The end of the beginning</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">2.1<tt>&nbsp;</tt></span><a href="#%28part._.Creating_a_source_file%29" class="tocsubseclink" data-pltdoc="x">Creating a source file</a></td></tr><tr><td><span class="tocsublinknumber">2.2<tt>&nbsp;</tt></span><a href="#%28part._.Running_a_source_file%29" class="tocsubseclink" data-pltdoc="x">Running a source file</a></td></tr><tr><td><span class="tocsublinknumber">2.3<tt>&nbsp;</tt></span><a href="#%28part._.Naming__saving__and_rendering_a_source_file%29" class="tocsubseclink" data-pltdoc="x">Naming, saving, and rendering a source file</a></td></tr><tr><td><span class="tocsublinknumber">2.4<tt>&nbsp;</tt></span><a href="#%28part._.The_project_server%29" class="tocsubseclink" data-pltdoc="x">The project server</a></td></tr><tr><td><span class="tocsublinknumber">2.5<tt>&nbsp;</tt></span><a href="#%28part._.Intermission%29" class="tocsubseclink" data-pltdoc="x">Intermission</a></td></tr><tr><td><span class="tocsublinknumber">2.6<tt>&nbsp;</tt></span><a href="#%28part._.Pollen_as_a_preprocessor%29" class="tocsubseclink" data-pltdoc="x">Pollen as a preprocessor</a></td></tr><tr><td><span class="tocsublinknumber">2.7<tt>&nbsp;</tt></span><a href="#%28part._.Markdown_mode%29" class="tocsubseclink" data-pltdoc="x">Markdown mode</a></td></tr><tr><td><span class="tocsublinknumber">2.8<tt>&nbsp;</tt></span><a href="#%28part._.Pollen_markup%29" class="tocsubseclink" data-pltdoc="x">Pollen markup</a></td></tr><tr><td><span class="tocsublinknumber">2.9<tt>&nbsp;</tt></span><a href="#%28part._.Templates%29" class="tocsubseclink" data-pltdoc="x">Templates</a></td></tr><tr><td><span class="tocsublinknumber">2.10<tt>&nbsp;</tt></span><a href="#%28part._.P.S_for_.Scribble_users%29" class="tocsubseclink" data-pltdoc="x">PS for Scribble users</a></td></tr><tr><td><span class="tocsublinknumber">2.11<tt>&nbsp;</tt></span><a href="#%28part._.The_end_of_the_beginning%29" class="tocsubseclink" data-pltdoc="x">The end of the beginning</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">8.4.900</span></div><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="Installation.html" title="backward to &quot;1 Installation&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot; Pollen :这本书是一个程序&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="____.html" title="forward to &quot;3 背景故事&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3>2<tt>&nbsp;</tt><a name="(part._quick-tour)"></a>Quick tour</h3><h4>2.1<tt>&nbsp;</tt><a name="(part._.Creating_a_source_file)"></a>Creating a source file</h4><p>Assuming you&rsquo;ve <a href="Installation.html" data-pltdoc="x">installed Racket &amp; Pollen</a>, launch DrRacket.</p><p>Start a new document. Change the top line to:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr></table></blockquote><p>The first line of every Pollen source file will start with <font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span>.</p><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>If you prefer to use the command line and an editor other than DrRacket, equivalent command-line instructions follow at the end of each section. If you&rsquo;re using DrRacket, you can ignore these.</p></blockquote></blockquote></blockquote><h4>2.2<tt>&nbsp;</tt><a name="(part._.Running_a_source_file)"></a>Running a source file</h4><p>Add a second line to your source file so it reads:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">Hello</span><span class="hspace">&nbsp;</span><span class="RktMeta">world</span><span class="RktMeta"></span></td></tr></table></blockquote><p>Click the <span class="ssansserif">Run</span> button. In the interactions window, you&rsquo;ll see the result:</p><blockquote class="SubFlow"><p><span class="RktVal"><span class="stt">Hello world</span></span></p></blockquote><p>Not bad. I think Pollen&#160;just won the <a href="http://helloworldcollection.de">Hello World Tournament</a>.</p><p>You can work with Pollen source files in any text editor, including Emacs or Sublime Text. The key advantage of DrRacket is that you can preview the results by running the file.</p><p>Try editing your source file:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">Era</span><span class="hspace">&nbsp;</span><span class="RktMeta">Vulgaris</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">Songs</span><span class="hspace">&nbsp;</span><span class="RktMeta">for</span><span class="hspace">&nbsp;</span><span class="RktMeta">the</span><span class="hspace">&nbsp;</span><span class="RktMeta">Deaf</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">Like</span><span class="hspace">&nbsp;</span><span class="RktMeta">Clockwork</span><span class="RktMeta"></span></td></tr></table></blockquote><p>You don&rsquo;t have to use Queens of the Stone Age albums. Any text will do. When you click <span class="ssansserif">Run</span> again, you&rsquo;ll see whatever you typed:</p><blockquote class="SubFlow"><p><span class="RktVal"><span class="stt">Era Vulgaris<br/>Songs for the Deaf<br/>Like Clockwork</span></span></p></blockquote><p>We won&rsquo;t do it a third time. You get the point &#8212; any plain text is valid within a Pollen source file, and gets printed as typed. What you write is what you get. You never have to perform the incantations often required by other programming languages:</p><div class="terminal"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">print "Hello world"</span></p></td></tr><tr><td><p><span class="stt">document.write('Hello world');</span></p></td></tr><tr><td><p><span class="stt">printf("Hello world");</span></p></td></tr></table></div></div><p><span style="font-weight: bold">Command line</span>: save the file as <span class="stt">"hello.txt.pp"</span> and then run:</p><div class="terminal"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&gt; racket hello.txt.pp</span></p></td></tr></table></div></div><h4>2.3<tt>&nbsp;</tt><a name="(part._.Naming__saving__and_rendering_a_source_file)"></a>Naming, saving, and rendering a source file</h4><p>Save this file as <span class="stt">"hello.txt.pp"</span> in any convenient directory. The desktop is fine.</p><p>Open a terminal window and issue two commands:</p><div class="terminal"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&gt; cd /directory/containing/your/hello-file</span></p></td></tr><tr><td><p><span class="stt">&gt; raco pollen render hello.txt.pp</span></p></td></tr></table></div></div><p>After a moment, a new file will appear called <span class="stt">"hello.txt"</span>. Let&rsquo;s see what&rsquo;s in it:</p><div class="terminal"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&gt; cat hello.txt</span></p></td></tr><tr><td><p><span class="stt">Era Vulgaris</span></p></td></tr><tr><td><p><span class="stt">Songs for the Deaf</span></p></td></tr><tr><td><p><span class="stt">Like Clockwork</span></p></td></tr></table></div></div><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>If <span class="stt">raco</span> doesn&rsquo;t work, it&rsquo;s probably because the <span class="stt">PATH</span> wasn&rsquo;t set up correctly during <a href="Installation.html" data-pltdoc="x">Installation</a>.</p></blockquote></blockquote></blockquote><p>You&rsquo;ve just learned three things:</p><ul><li><p>Pollen commands in the terminal begin with <span class="stt">raco pollen</span>, followed by a specific command (in this case <span class="stt">render</span>) and sometimes an argument (in this case <span class="stt">hello.txt.pp</span>).</p></li><li><p>The <span class="stt">render</span> command takes the ouput from your source file &#8212;&#160;meaning, the result you previewed in DrRacket in the previous step &#8212;&#160;and saves it to another file.</p></li><li><p>The name of the output file is the same as the source file, minus the Pollen source extension. So <span class="stt">"hello.txt.pp"</span> is rendered to a file called <span class="stt">"hello.txt"</span>.</p></li></ul><p>Try editing the text in <span class="stt">"hello.txt.pp"</span> and running the command again:</p><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">raco pollen render hello.txt.pp</span></p><p>The old <span class="stt">"hello.txt"</span> will be replaced with a new one showing your changes. So now you&rsquo;ve learned a fourth thing:</p><ul><li><p>Pollen works by rendering output files from source files. Output files can be overwritten. Therefore, you should only edit your source files.</p></li></ul><h4>2.4<tt>&nbsp;</tt><a name="(part._.The_project_server)"></a>The project server</h4><p>You just saw two ways to view the output of a Pollen source file &#8212;&#160;first, you ran it in DrRacket. Second, you rendered it to an output file.</p><p>Now here&rsquo;s a third: the Pollen project server.</p><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>The project server is a real web server running on your machine. By default it will respond to requests from any computer. Use the <span class="stt">--local</span> switch with this command to restrict the project server to responding to requests from localhost. See <a href="raco-pollen.html#%28part._raco_pollen_start%29" data-pltdoc="x"><span class="stt">raco pollen start</span></a>.</p></blockquote></blockquote></blockquote><p>To start the project server, return to your terminal and issue two commands:</p><div class="terminal"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&gt; cd /directory/containing/your/hello-file</span></p></td></tr><tr><td><p><span class="stt">&gt; raco pollen start</span></p></td></tr></table></div></div><p>After a moment, you&rsquo;ll see the startup message:</p><div class="terminal"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">pollen: welcome to Pollen 3.2.3136.1057 (Racket 8.4.900)</span></p></td></tr><tr><td><p><span class="stt">pollen: project root is /path/to/your/directory</span></p></td></tr><tr><td><p><span class="stt">pollen: project server is http://localhost:8080 (Ctrl+C to exit)</span></p></td></tr><tr><td><p><span class="stt">pollen: project dashboard is http://localhost:8080/index.ptree</span></p></td></tr><tr><td><p><span class="stt">pollen: ready to rock</span></p></td></tr></table></div></div><p>Open a web browser and point it at the project dashboard, which by default is <a href="http://localhost:8080/index.ptree"><span class="stt">http://localhost:8080/index.ptree</span></a>. The top line of the window will say <span class="stt">Project root</span> and show the name of the starting directory. Below that will be a listing of the files in the directory.</p><p>Among them will be <span class="stt">"hello.txt"</span>, with a greyed-out <span class="stt">".pp"</span> extension. Click on it, and you&rsquo;ll be taken to <a href="http://localhost:8080/hello.txt"><span class="stt">http://localhost:8080/hello.txt</span></a>, where you&rsquo;ll see:</p><div class="terminal"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">Era Vulgaris</span></p></td></tr><tr><td><p><span class="stt">Songs for the Deaf</span></p></td></tr><tr><td><p><span class="stt">Like Clockwork</span></p></td></tr></table></div></div><p>That&rsquo;s the boring part. Here&rsquo;s the good part. Leave the project server running. Open your source file again in DrRacket and edit it as follows:</p><div class="fileblock"><div class="SIntrapara"><div class="fileblockFiletitle"><span class="fileblockFilename"><span class="stt">"hello.txt.pp"</span></span></div></div><div class="SIntrapara"><div class="fileblockFilecontent"><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">Grand</span><span class="hspace">&nbsp;</span><span class="RktMeta">Illusion</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">Pieces</span><span class="hspace">&nbsp;</span><span class="RktMeta">of</span><span class="hspace">&nbsp;</span><span class="RktMeta">Eight</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">Paradise</span><span class="hspace">&nbsp;</span><span class="RktMeta">Theatre</span><span class="RktMeta"></span></td></tr></table></blockquote></div></div></div></div><p>Go back to your web browser and reload <a href="http://localhost:8080/hello.txt"><span class="stt">http://localhost:8080/hello.txt</span></a>. Now you&rsquo;ll see&#160;this:</p><div class="terminal"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">Grand Illusion</span></p></td></tr><tr><td><p><span class="stt">Pieces of Eight</span></p></td></tr><tr><td><p><span class="stt">Paradise Theatre</span></p></td></tr></table></div></div><p>Notice what happened &#8212;&#160;the Pollen project server dynamically regenerated the output file (<span class="stt">"hello.txt"</span>) from the source file (<span class="stt">"hello.txt.pp"</span>) after you edited the source. If you like, try making some more changes to <span class="stt">"hello.txt.pp"</span>, and reloading the browser to see the updates in <span class="stt">"hello.txt"</span>. The project server will regenerate the file whenever it changes.</p><p><span style="font-weight: bold">Command line</span>: to see the changes after each edit, run:</p><div class="terminal"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&gt; raco pollen render hello.txt.pp</span></p></td></tr><tr><td><p><span class="stt">&gt; cat hello.txt</span></p></td></tr></table></div></div><h4>2.5<tt>&nbsp;</tt><a name="(part._.Intermission)"></a>Intermission</h4><p>That covers input &amp; output. Now let&rsquo;s circle back and look at what else you can do with Pollen (beyond the epic achievement of displaying plain text&#160;in a web browser).</p><p>For the rest of this tutorial, I recommend keeping two windows on screen: a web-browser window pointed at your <a href="http://localhost:8080/index.ptree">project dashboard</a>, and the DrRacket editing window.</p><h4>2.6<tt>&nbsp;</tt><a name="(part._.Pollen_as_a_preprocessor)"></a>Pollen as a preprocessor</h4><p>A <span style="font-style: italic">preprocessor</span> is a tool for making systematic, automated changes to a source file before the main processing happens. A preprocessor can also be used to add programming logic to files that otherwise don&rsquo;t support it.</p><p>For instance, HTML. In DrRacket, create a new file called <span class="stt">"margin.html.pp"</span> in your project directory:</p><div class="fileblock"><div class="SIntrapara"><div class="fileblockFiletitle"><span class="fileblockFilename"><span class="stt">"margin.html.pp"</span></span></div></div><div class="SIntrapara"><div class="fileblockFilecontent"><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;body</span><span class="hspace">&nbsp;</span><span class="RktMeta">style="margin:</span><span class="hspace">&nbsp;</span><span class="RktMeta">5em;</span><span class="hspace">&nbsp;</span><span class="RktMeta">border:1px</span><span class="hspace">&nbsp;</span><span class="RktMeta">solid</span><span class="hspace">&nbsp;</span><span class="RktMeta">black"&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">5em</span><span class="hspace">&nbsp;</span><span class="RktMeta">is</span><span class="hspace">&nbsp;</span><span class="RktMeta">the</span><span class="hspace">&nbsp;</span><span class="RktMeta">inset.</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;/body&gt;</span><span class="RktMeta"></span></td></tr></table></blockquote></div></div></div></div><p>The <span class="stt">".pp"</span> file extension &#8212; which you saw before, with <span class="stt">"hello.txt.pp"</span> &#8212; stands for &ldquo;Pollen preprocessor.&rdquo; You can use the Pollen preprocessor with any text-based file by inserting <font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span> as the first line, and adding the <span class="stt">".pp"</span> file extension.</p><p>But for now, go to your <a href="http://localhost:8080/index.ptree">project dashboard</a> and click <a href="http://localhost:8080/margin.html"><span class="stt">"margin.html"</span></a>. You should see a black box containing the text &ldquo;<span class="stt">5em is the inset.</span>&rdquo;</p><p>Suppose you want to change the inset to 30%. Without a preprocessor, you&rsquo;d have to search &amp; replace each value. But with a preprocessor, you can move the inset value into a variable, and update it from that one location. So first, introduce a variable called <span class="RktSym">my-inset</span><span class="RktMeta"></span> by using the <span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span> command:</p><div class="fileblock"><div class="SIntrapara"><div class="fileblockFiletitle"><span class="fileblockFilename"><span class="stt">"margin.html.pp"</span></span></div></div><div class="SIntrapara"><div class="fileblockFilecontent"><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">my-inset</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"30%"</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;body</span><span class="hspace">&nbsp;</span><span class="RktMeta">style="margin:</span><span class="hspace">&nbsp;</span><span class="RktMeta">10em;</span><span class="hspace">&nbsp;</span><span class="RktMeta">border:1px</span><span class="hspace">&nbsp;</span><span class="RktMeta">solid</span><span class="hspace">&nbsp;</span><span class="RktMeta">black"&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">10em</span><span class="hspace">&nbsp;</span><span class="RktMeta">is</span><span class="hspace">&nbsp;</span><span class="RktMeta">the</span><span class="hspace">&nbsp;</span><span class="RktMeta">inset.</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;/body&gt;</span><span class="RktMeta"></span></td></tr></table></blockquote></div></div></div></div><p>The <span class="RktSym">&#9674;</span><span class="RktMeta"></span> character is called a <span style="font-style: italic">lozenge</span>. In Pollen, the lozenge is a special character used to denote anything that Pollen should interpret as a command (rather than plain text).</p><p>If you&rsquo;re using DrRacket, you can insert a lozenge by clicking the <span class="ssansserif">Insert command char &#9674;</span> button at the top of your source window. (If you&rsquo;re not using DrRacket, see <a href="pollen-command-syntax.html#%28part._the-lozenge%29" data-pltdoc="x">these instructions</a>.)</p><p>Thus, the command <span class="RktSym">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">my-inset</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"30%"</span><span class="RktPn">)</span><span class="RktMeta"></span> means &ldquo;create the variable <span class="RktSym">my-inset</span><span class="RktMeta"></span> and assign it the value <span class="RktVal">"30%"</span>.&rdquo;</p><p>Now you can insert the variable into the HTML, this time using the special &#9674; character with the variable name in the two places the value needs to appear:</p><div class="fileblock"><div class="SIntrapara"><div class="fileblockFiletitle"><span class="fileblockFilename"><span class="stt">"margin.html.pp"</span></span></div></div><div class="SIntrapara"><div class="fileblockFilecontent"><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">my-inset</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"30%"</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;body</span><span class="hspace">&nbsp;</span><span class="RktMeta">style="margin:</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">my-inset</span><span class="RktMeta">;</span><span class="hspace">&nbsp;</span><span class="RktMeta">border:1px</span><span class="hspace">&nbsp;</span><span class="RktMeta">solid</span><span class="hspace">&nbsp;</span><span class="RktMeta">black"&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">my-inset</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta">is</span><span class="hspace">&nbsp;</span><span class="RktMeta">the</span><span class="hspace">&nbsp;</span><span class="RktMeta">inset.</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;/body&gt;</span><span class="RktMeta"></span></td></tr></table></blockquote></div></div></div></div><p>In your web browser, reload <a href="http://localhost:8080/margin.html"><span class="stt">"margin.html"</span></a>. You&rsquo;ll see that the size of the margin has changed (because of the change to the <span class="RktSym">style</span><span class="RktMeta"></span> attribute) and so has the text of the HTML. If you like, try editing <span class="RktSym">my-inset</span><span class="RktMeta"></span> with different values and reloading the page. You can also try using <span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span> to create another variable (for instance, to change the color of the box border).</p><p>Still, this is the tiniest tip of the iceberg. The Pollen preprocessor gives you access to everything in the Racket programming language &#8212;&#160;including string manipulation, math functions, and so on.</p><p><span style="font-weight: bold">Command line</span>: type the lozenge using whatever keyboard method you prefer (see <a href="pollen-command-syntax.html#%28part._the-lozenge%29" data-pltdoc="x">The lozenge (&#9674;)</a> for suggestions).</p><h4>2.7<tt>&nbsp;</tt><a name="(part._.Markdown_mode)"></a>Markdown mode</h4><p>When used as a preprocessor, Pollen&rsquo;s rule is that what you write is what you get. But if you&rsquo;re targeting HTML, who wants to type out all those <span class="RktSym">&lt;tedious&gt;tags&lt;/tedious&gt;</span><span class="RktMeta"></span>? You can make Pollen do the heavy lifting by using an <span style="font-style: italic">authoring mode</span>.</p><p>For instance, Markdown authoring mode. Markdown is a simplified <a href="https://daringfireball.net/projects/markdown/">notation system</a> for HTML. You can use Markdown authoring mode in Pollen by inserting <font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span> as the first line, and adding the <span class="stt">".pmd"</span> file extension.</p><p>Try it. In DrRacket, create a file with the following lines and save it as <span class="stt">"downtown.html.pmd"</span>:</p><div class="fileblock"><div class="SIntrapara"><div class="fileblockFiletitle"><span class="fileblockFilename"><span class="stt">"downtown.html.pmd"</span></span></div></div><div class="SIntrapara"><div class="fileblockFilecontent"><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">Pollen</span><span class="hspace">&nbsp;</span><span class="RktMeta">+</span><span class="hspace">&nbsp;</span><span class="RktMeta">Markdown</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">-----------------</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">+</span><span class="hspace">&nbsp;</span><span class="RktMeta">You</span><span class="hspace">&nbsp;</span><span class="RktMeta">**wanted**</span><span class="hspace">&nbsp;</span><span class="RktMeta">it</span><span class="hspace">&nbsp;</span><span class="RktMeta">&#8212;</span><span class="hspace">&nbsp;</span><span class="RktMeta">you</span><span class="hspace">&nbsp;</span><span class="RktMeta">_got_</span><span class="hspace">&nbsp;</span><span class="RktMeta">it.</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">+</span><span class="hspace">&nbsp;</span><span class="RktMeta">[search</span><span class="hspace">&nbsp;</span><span class="RktMeta">for</span><span class="hspace">&nbsp;</span><span class="RktMeta">Racket](https://google.com/search?q=racket)</span><span class="RktMeta"></span></td></tr></table></blockquote></div></div></div></div><p>As before, go to the <a href="http://localhost:8080/index.ptree">project dashboard</a>. This time, click the link for <a href="http://localhost:8080/downtown.html"><span class="stt">"downtown.html"</span></a>. You&rsquo;ll see something like this:</p><div class="browser"><div class="SIntrapara"> <span style="font-weight: bold"><span class="Larger">Pollen + Markdown</span></span><br/><br/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#8226; You <span style="font-weight: bold">wanted</span> it &#8212;&#160;you <span style="font-style: italic">got</span> it.<br/><br/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#8226; <a href="https://google.com/search?q=racket">search for Racket</a></div></div><p>As usual, you&rsquo;re welcome to edit <span class="stt">"downtown.html.pmd"</span> and then refresh the web browser to see the changes.</p><p>In Markdown authoring mode, you can still embed Pollen commands within the source as you did in preprocessor mode. Just keep in mind that your commands need to produce valid Markdown (as opposed to raw HTML). For instance, use <span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span> to create a variable called <span class="RktSym">metal</span><span class="RktMeta"></span>, and insert it into the Markdown:</p><div class="fileblock"><div class="SIntrapara"><div class="fileblockFiletitle"><span class="fileblockFilename"><span class="stt">"downtown.html.pmd"</span></span></div></div><div class="SIntrapara"><div class="fileblockFilecontent"><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">metal</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"Plutonium"</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">Pollen</span><span class="hspace">&nbsp;</span><span class="RktMeta">+</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">metal</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">---------------</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">+</span><span class="hspace">&nbsp;</span><span class="RktMeta">You</span><span class="hspace">&nbsp;</span><span class="RktMeta">**wanted**</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">metal</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta">&#8212;</span><span class="hspace">&nbsp;</span><span class="RktMeta">you</span><span class="hspace">&nbsp;</span><span class="RktMeta">_got_</span><span class="hspace">&nbsp;</span><span class="RktMeta">it.</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">+</span><span class="hspace">&nbsp;</span><span class="RktMeta">[search</span><span class="hspace">&nbsp;</span><span class="RktMeta">for</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">metal</span><span class="RktMeta">](https://google.com/search?q=</span><span class="RktPn">&#9674;</span><span class="RktSym">metal</span><span class="RktMeta">)</span><span class="RktMeta"></span></td></tr></table></blockquote></div></div></div></div><p>Refresh <a href="http://localhost:8080/downtown.html"><span class="stt">"downtown.html"</span></a> in the browser:</p><div class="browser"><div class="SIntrapara"> <span style="font-weight: bold"><span class="Larger">Pollen + Plutonium</span></span><br/><br/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#8226; You <span style="font-weight: bold">wanted</span> Plutonium &#8212;&#160;you <span style="font-style: italic">got</span> it.<br/><br/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#8226; <a href="https://google.com/search?q=Plutonium">search for Plutonium</a></div></div><p>Pollen is handling three tasks here: interpreting the commands in the source, converting the source to Markdown, and then to HTML. (For more, see <font class="badlink">(part ("(lib pollen/scribblings/pollen.scrbl)" "Markdown_authoring_mode"))</font>.)</p><p>But what if you wanted to use Pollen as a preprocessor that outputs a Markdown file? No problem &#8212;&#160;just change the source name from <span class="stt">"downtown.html.pmd"</span> to <span class="stt">"downtown.md.pp"</span>. Changing the extension from <span class="stt">".pmd"</span> to <span class="stt">".pp"</span> switches Pollen from Markdown mode back to preprocessor mode. And changing the base name from <span class="stt">"downtown.html"</span> to <span class="stt">"downtown.md"</span> updates the name of the output file (and thereby skips the HTML conversion).</p><p><span style="font-weight: bold">Command line</span>: to render the new source file after each edit, run:</p><div class="terminal"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&gt; raco pollen render downtown.html.pmd</span></p></td></tr></table></div></div><p>And then view the resulting <span class="stt">"downtown.html"</span> file however you like.</p><h4>2.8<tt>&nbsp;</tt><a name="(part._.Pollen_markup)"></a>Pollen markup</h4><p>If all you need to do is produce basic HTML, Markdown is fine. But if you need to do semantic markup or other kinds of custom markup, it&rsquo;s <a href="second-tutorial.html#%28part._the-case-against-markdown%29" data-pltdoc="x">not flexible enough</a>.</p><p>In that case, you can use a different authoring mode, called <span style="font-style: italic">Pollen markup</span>. To use Pollen markup, insert <font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span> as the first line of your source as usual, but this time add a <span class="stt">".pm"</span> file extension.</p><p>Compared to Markdown authoring mode, Pollen markup is wide open. Markdown authoring mode limits you to the formatting commands supported by Markdown. With Pollen markup, by contrast, you can use any tags you want. Markdown mode interprets the source in a fixed way (i.e., according to Markdown rules). But Pollen markup lets you attach any behavior you want to your tags.</p><p>To see how this works, let&rsquo;s convert our Markdown example into Pollen markup. Marking up content is simple: insert the lozenge character (<span class="RktSym">&#9674;</span><span class="RktMeta"></span>) followed by the name of the tag (<span class="RktSym">&#9674;tag</span><span class="RktMeta"></span>), followed by the content of the tag in curly braces (<span class="RktSym">&#9674;tag</span><span class="RktPn">{</span><span class="RktSym">content</span><span class="RktPn">}</span><span class="RktMeta"></span>). In DrRacket, create a new file called <span class="stt">"uptown.html.pm"</span> as follows:</p><div class="fileblock"><div class="SIntrapara"><div class="fileblockFiletitle"><span class="fileblockFilename"><span class="stt">"uptown.html.pm"</span></span></div></div><div class="SIntrapara"><div class="fileblockFilecontent"><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">headline</span><span class="RktPn">{</span><span class="RktMeta">Pollen</span><span class="hspace">&nbsp;</span><span class="RktMeta">markup</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">items</span><span class="RktPn">{</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">item</span><span class="RktPn">{</span><span class="RktMeta">You</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">strong</span><span class="RktPn">{</span><span class="RktMeta">wanted</span><span class="RktPn">}</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta">it</span><span class="hspace">&nbsp;</span><span class="RktMeta">&#8212;</span><span class="hspace">&nbsp;</span><span class="RktMeta">you</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">em</span><span class="RktPn">{</span><span class="RktMeta">got</span><span class="RktPn">}</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta">it.</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">item</span><span class="RktPn">{</span><span class="RktPn">&#9674;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">link</span></span></span><span class="RktPn">[</span><span class="RktVal">"https://google.com/search?q=racket"</span><span class="RktPn">]</span><span class="RktPn">{</span><span class="RktMeta">search</span><span class="hspace">&nbsp;</span><span class="RktMeta">for</span><span class="hspace">&nbsp;</span><span class="RktMeta">Racket</span><span class="RktPn">}</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr></table></blockquote></div></div></div></div><p>Go to the <a href="http://localhost:8080/index.ptree">project dashboard</a> and click on <a href="http://localhost:8080/uptown.html"><span class="stt">"uptown.html"</span></a>. You&rsquo;ll see something like this:</p><div class="browser"><div class="SIntrapara">Pollen markup You <span style="font-weight: bold">wanted</span> it &#8212;&#160;you <span style="font-style: italic">got</span> it. https://google.com/search?q=racketsearch for Racket</div></div><p>That&rsquo;s not right. What happened?</p><p>We marked up the source using a combination of standard HTML tags (<span class="RktSym">strong</span><span class="RktMeta"></span>, <span class="RktSym">em</span><span class="RktMeta"></span>) and nonstandard ones (<span class="RktSym">headline</span><span class="RktMeta"></span>, <span class="RktSym">items</span><span class="RktMeta"></span>, <span class="RktSym">item</span><span class="RktMeta"></span>, <span class="RktSym"><span class="badlink"><span class="RktValLink">link</span></span></span><span class="RktMeta"></span>). This is valid Pollen markup. (In fact, if you look at <a href="http://localhost:8080/out/uptown.html">the generated source</a>, you&rsquo;ll see that they didn&rsquo;t disappear.) But since we&rsquo;re targeting HTML, we need to convert our custom tags into valid HTML tags.</p><p>For that, we&rsquo;ll make a special file called <span class="stt">"pollen.rkt"</span>. This is a file in the standard Racket language that provides helper functions to decode the source. The definitions won&rsquo;t make sense yet. But this is the quick tour, so all you need to do is copy, paste, and save:</p><div class="fileblock"><div class="SIntrapara"><div class="fileblockFiletitle"><span class="fileblockFilename"><span class="stt">"pollen.rkt"</span></span></div></div><div class="SIntrapara"><div class="fileblockFilecontent"><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><font class="badlink"><span class="RktModLink"><span class="RktSym">racket/base</span></span></font><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">require</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">pollen/tag</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">provide</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">all-defined-out</span></span></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">headline</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">default-tag-function</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="badlink"><span class="RktValLink">'</span></span></span><span class="RktSym">h2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">items</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">default-tag-function</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="badlink"><span class="RktValLink">'</span></span></span><span class="RktSym">ul</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">item</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">default-tag-function</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="badlink"><span class="RktValLink">'</span></span></span><span class="RktSym">li</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="badlink"><span class="RktValLink">'</span></span></span><span class="RktSym">p</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">link</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">url</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">text</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="badlink"><span class="RktValLink">`</span></span></span><span class="RktPn">(</span><span class="RktSym">a</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">href</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="badlink"><span class="RktValLink">,</span></span></span><span class="RktSym">url</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="badlink"><span class="RktValLink">,</span></span></span><span class="RktSym">text</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></div></div></div></div><p>Return to the <a href="http://localhost:8080/index.ptree">project dashboard</a> and click on <a href="http://localhost:8080/uptown.html"><span class="stt">"uptown.html"</span></a>. Now you&rsquo;ll get the right result:</p><div class="browser"><div class="SIntrapara"> <span style="font-weight: bold"><span class="Larger">Pollen markup</span></span><br/><br/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#8226; You <span style="font-weight: bold">wanted</span> it &#8212;&#160;you <span style="font-style: italic">got</span> it.<br/><br/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#8226; <a href="https://google.com/search?q=racket">search for Racket</a></div></div><p>Pollen markup takes a little more effort to set up. But it also allows you more flexibility. If you want to do semantic markup, or convert your source into <a href="fourth-tutorial.html" data-pltdoc="x">multiple output formats</a>, or handle complex page layouts &#8212;&#160;it&rsquo;s the way to go. (For more, see <font class="badlink">(part ("(lib pollen/scribblings/pollen.scrbl)" "Writing_with_Pollen_markup"))</font>.)</p><p><span style="font-weight: bold">Command line</span>: to render the new source file after each edit, run:</p><div class="terminal"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&gt; raco pollen render uptown.html.pm</span></p></td></tr></table></div></div><p>And then view the resulting <span class="stt">"uptown.html"</span> file however you like.</p><h4>2.9<tt>&nbsp;</tt><a name="(part._.Templates)"></a>Templates</h4><p>The HTML pages we just made looked pretty dull. For the last stop on the quick tour, let&rsquo;s fix that.</p><p>Pollen source files that are written in an authoring mode (i.e., <span class="stt">".pmd"</span> or <span class="stt">".pm"</span> files) are rendered with a <span style="font-style: italic">template</span>. A template is not a standalone Pollen source file. It&rsquo;s a file of the output type &#8212; e.g., CSS, HTML, XML &#8212; where you put the stuff that needs to be consistent between output files. The template also contains <span style="font-style: italic">template variables</span> that mark where values from the Pollen source file should be inserted.</p><p>When it needs a template, Pollen first looks for a file in the project directory named <span class="stt">"template.[output extension of source]"</span>. Thus, for <span class="stt">"uptown.html.pm"</span>, the output extension will be <span class="stt">".html"</span>, and Pollen will first look for <span class="stt">"template.html"</span>.</p><p>So let&rsquo;s create <span class="stt">"template.html"</span>. Make a new file with the following lines and save it to the same directory as <span class="stt">"uptown.html.pm"</span>:</p><div class="fileblock"><div class="SIntrapara"><div class="fileblockFiletitle"><span class="fileblockFilename"><span class="stt">"template.html"</span></span></div></div><div class="SIntrapara"><div class="fileblockFilecontent"><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktSym">&lt;html&gt;&lt;head&gt;&lt;meta</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">charset=</span><span class="RktVal">"UTF-8"</span><span class="RktSym">/&gt;&lt;/head&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">&lt;body</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">style=</span><span class="RktVal">"background:</span><span class="hspace">&nbsp;</span><span class="RktVal">#f6f6f6"</span><span class="RktSym"><span class="badlink"><span class="RktValLink">&gt;</span></span></span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">&lt;div</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">style=</span><span class="RktVal">"background:</span><span class="hspace">&nbsp;</span><span class="RktVal">white;</span><span class="hspace">&nbsp;</span><span class="RktVal">margin:</span><span class="hspace">&nbsp;</span><span class="RktVal">3em;</span></td></tr><tr><td><span class="RktVal">border:10px</span><span class="hspace">&nbsp;</span><span class="RktVal">double</span><span class="hspace">&nbsp;</span><span class="RktVal">gray;</span><span class="hspace">&nbsp;</span><span class="RktVal">padding:</span><span class="hspace">&nbsp;</span><span class="RktVal">3em;</span><span class="hspace">&nbsp;</span><span class="RktVal">font-size:</span><span class="hspace">&nbsp;</span><span class="RktVal">130%;"</span><span class="RktSym"><span class="badlink"><span class="RktValLink">&gt;</span></span></span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">This</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="badlink"><span class="RktValLink">file</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">is</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">&#9674;here</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">&lt;hr</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">/&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><a href="Template.html#%28def._%28%28lib._pollen%2Ftemplate%2Fhtml..rkt%29._-~3ehtml%29%29" class="RktValLink" data-pltdoc="x"><span class="nobreak">-&gt;</span>html</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">&#9674;doc</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;</span><span class="RktMeta"></span></td></tr></table></blockquote></div></div></div></div><p>This is a simple HTML file that should look familiar, except for the two template variables. The first, <span class="RktSym">here</span><span class="RktMeta"></span>, contains the name of the current source file. As before, the lozenge character marks it as a Pollen command rather than text, so you write it as <span class="RktSym">&#9674;here</span><span class="RktMeta"></span>. The other command, <span class="RktSym">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><a href="Template.html#%28def._%28%28lib._pollen%2Ftemplate%2Fhtml..rkt%29._-~3ehtml%29%29" class="RktValLink" data-pltdoc="x"><span class="nobreak">-&gt;</span>html</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">&#9674;doc</span><span class="RktPn">)</span><span class="RktMeta"></span>, takes the content from the source file, which is contained in a variable called <span class="RktSym">doc</span><span class="RktMeta"></span>, and converts it to HTML with <span class="RktSym"><a href="Template.html#%28def._%28%28lib._pollen%2Ftemplate%2Fhtml..rkt%29._-~3ehtml%29%29" class="RktValLink" data-pltdoc="x"><span class="nobreak">-&gt;</span>html</a></span>.</p><p>Return to your web browser and reload <a href="http://localhost:8080/uptown.html"><span class="stt">"uptown.html"</span></a>. (Or <a href="http://localhost:8080/downtown.html"><span class="stt">"downtown.html"</span></a> &#8212;&#160;both will work.) The page will be rendered with the new <span class="stt">"template.html"</span>. As before, you can edit the template or the source and the project server will dynamically update the output file.</p><p><span style="font-weight: bold">Command line</span>: to refresh the output after each edit of <span class="stt">"template.html"</span>, run:</p><div class="terminal"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&gt; raco pollen render uptown.html.pm downtown.html.pm</span></p></td></tr></table></div></div><p>And then view the resulting <span class="stt">"uptown.html"</span> and <span class="stt">"downtown.html"</span> files however you like.</p><h4>2.10<tt>&nbsp;</tt><a name="(part._.P.S_for_.Scribble_users)"></a>PS for Scribble users</h4><p>Pollen can also be used as a dynamic preview server for Scribble files. From your terminal, do the following:</p><div class="terminal"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&gt; cd /path/to/scribble/sources</span></p></td></tr><tr><td><p><span class="stt">&gt; raco pollen start</span></p></td></tr></table></div></div><p>On the <a href="http://localhost:8080/index.ptree">project dashboard</a>, you&rsquo;ll see your <span class="stt">"filename.scrbl"</span> files listed as <span class="stt">"filename.html"</span>. By clicking on these names, you can get a preview rendering of the Scribble source file. This may not represent the ultimate structure of your Scribble project &#8212;&#160;you may end up combining multiple Scribble source files into one HTML file, or making multiple HTML files from one Scribble source &#8212; but it&rsquo;s handy for checking your work as you go.</p><h4>2.11<tt>&nbsp;</tt><a name="(part._.The_end_of_the_beginning)"></a>The end of the beginning</h4><p>Now you&rsquo;ve seen the key features of Pollen. What do you think?</p><ul><li><p><span style="font-style: italic">&ldquo;So it&rsquo;s like WordPress, but harder to use?&rdquo;</span> I was once a happy WordPress user. If you need a blog, it&rsquo;s great. But the farther you get from blogs, the more it becomes like teaching a hippo to fly. And for those who like to solve problems with programming, PHP is, um, <a href="http://eev.ee/blog/2012/04/09/php-a-fractal-of-bad-design/">limited</a>.</p></li><li><p><span style="font-style: italic">&ldquo;What about pairing a Python template system and Python web server?&rdquo;</span> Good idea. I even tried it. But Python template systems don&rsquo;t offer you Python &#8212;&#160;they offer you limited dialects that aren&rsquo;t very Pythonic. Also, Python&rsquo;s handing of XML-ish data is cumbersome.</p></li><li><p><span style="font-style: italic">&ldquo;Haven&rsquo;t you heard of Jekyll?&rdquo;</span> Yes. If everything you need to write is expressible in Markdown, it&rsquo;s great. If you need more than that, you&rsquo;re stuck. (See also <a href="second-tutorial.html#%28part._the-case-against-markdown%29" data-pltdoc="x">my objections to Markdown for books</a>.)</p></li><li><p><span style="font-style: italic">&ldquo;Sounds a lot like LaTeX. Why not use that?&rdquo;</span> Also a good idea. LaTeX gets a lot of things right. But it&rsquo;s also missing a lot &#8212; for instance,&#160;Unicode and web publishing.</p></li><li><p><span style="font-style: italic">&ldquo;Does the world really need another static site generator?&rdquo;</span> Agreed &#8212;&#160;if you want a system that does the heavy lifting, you have plenty of good options. But if you want a system that&rsquo;s fully programmable and <a href="fourth-tutorial.html#%28part._.Adding_support_for_.P.D.F_output%29" data-pltdoc="x">doesn&rsquo;t limit you</a> to websites &#8212; well,&#160;let me know <a href="http://lmgtfy.com/?q=programmable+document+generator">what you find</a>.</p></li><li><p><span style="font-style: italic">&ldquo;Why should I try a system written in Racket, which I&rsquo;ve never used?&rdquo;</span> I respect your skepticism. I had never used it either. But Pollen isn&rsquo;t built on Racket merely so I can enhance my indie cred. Rather, it&rsquo;s because XML and Lisps have a <a href="http://www.defmacro.org/ramblings/lisp.html">close kinship</a>, and the Racket developers&#160;had already figured out how to <font class="badlink">embed code in text</font>. (For more about the benefits of Racket, see <a href="http://practicaltypography.com/why-racket-why-lisp.html">Why Racket? Why Lisp?</a>)</p></li></ul><p>But don&rsquo;t take my word for it. The rest of this documentation will show you the useful and sophisticated things you can do with Pollen. If there&rsquo;s another tool that suits you better, great. Keep in mind that I didn&rsquo;t make Pollen because I&rsquo;m a programmer pushing some abstract fantasy of how writers ought to work. Rather, I&rsquo;m a writer who wants to make electronic books that are better than the ones we have now. And for that, I needed a better tool.</p><p>Now I have it.</p><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="Installation.html" title="backward to &quot;1 Installation&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot; Pollen :这本书是一个程序&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="____.html" title="forward to &quot;3 背景故事&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>