<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>13&nbsp;Programming Pollen</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="mb.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x"> Pollen :<span class="mywbr"> &nbsp;</span>&#36825;&#26412;&#20070;&#26159;&#19968;&#20010;&#31243;&#24207;</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="Installation.html" class="tocviewlink" data-pltdoc="x">Installation</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="quick-tour.html" class="tocviewlink" data-pltdoc="x">Quick tour</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="____.html" class="tocviewlink" data-pltdoc="x">&#32972;&#26223;&#25925;&#20107;</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="big-picture.html" class="tocviewlink" data-pltdoc="x">&#24635;&#35272;</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="first-tutorial.html" class="tocviewlink" data-pltdoc="x">&#31532;&#19968;&#20010;&#25945;&#31243;&#65306;&#39033;&#30446;&#26381;&#21153;&#22120;&#21644;&#39044;&#22788;&#29702;&#22120;</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="second-tutorial.html" class="tocviewlink" data-pltdoc="x">&#31532;&#20108;&#20010;&#25945;&#31243;&#65306;Markdown&#12289;&#27169;&#26495;&#21644;&#39029;&#38754;&#26641;</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="third-tutorial.html" class="tocviewlink" data-pltdoc="x">&#31532;&#19977;&#20010;&#25945;&#31243;&#65306; Pollen &#26631;&#35760;&#21644;&#26631;&#31614;&#20989;&#25968;</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="fourth-tutorial.html" class="tocviewlink" data-pltdoc="x">&#31532;&#22235;&#20010;&#25945;&#31243;&#65306;&#22810;&#20010;&#36755;&#20986;&#30446;&#26631;</a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="mini-tutorial.html" class="tocviewlink" data-pltdoc="x">&#19968;&#20123;&#29420;&#31435;&#30340;&#23567;&#25945;&#31243;</a></td></tr><tr><td align="right">10&nbsp;</td><td><a href="raco-pollen.html" class="tocviewlink" data-pltdoc="x">&#20351;&#29992; <span class="stt">raco pollen</span> &#21629;&#20196;</a></td></tr><tr><td align="right">11&nbsp;</td><td><a href="File_formats.html" class="tocviewlink" data-pltdoc="x">File formats</a></td></tr><tr><td align="right">12&nbsp;</td><td><a href="pollen-command-syntax.html" class="tocviewlink" data-pltdoc="x">Pollen command syntax</a></td></tr><tr><td align="right">13&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Programming Pollen</a></td></tr><tr><td align="right">14&nbsp;</td><td><a href="Module_reference.html" class="tocviewlink" data-pltdoc="x">Module reference</a></td></tr><tr><td align="right">15&nbsp;</td><td><a href="Unstable_module_reference.html" class="tocviewlink" data-pltdoc="x">Unstable module reference</a></td></tr><tr><td align="right">16&nbsp;</td><td><a href="Acknowledgments.html" class="tocviewlink" data-pltdoc="x">Acknowledgments</a></td></tr><tr><td align="right">17&nbsp;</td><td><a href="License___source_code.html" class="tocviewlink" data-pltdoc="x">License &amp; source code</a></td></tr><tr><td align="right">18&nbsp;</td><td><a href="version-notes.html" class="tocviewlink" data-pltdoc="x">Version notes (3.2.3136.1057)</a></td></tr><tr><td align="right"></td><td><a href="doc-index.html" class="tocviewlink" data-pltdoc="x">Index</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>13&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Programming Pollen</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">13.1&nbsp;</td><td><a href="#%28part._.Tag_functions%29" class="tocviewlink" data-pltdoc="x">Tag functions</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">13.1<tt>&nbsp;</tt></span><a href="#%28part._.Tag_functions%29" class="tocsubseclink" data-pltdoc="x">Tag functions</a></td></tr><tr><td><span class="tocsublinknumber">13.1.1<tt>&nbsp;</tt></span><a href="#%28part._.Tag-function_syntax%29" class="tocsubseclink" data-pltdoc="x">Tag-<wbr></wbr>function syntax</a></td></tr><tr><td><span class="tocsublinknumber">13.1.2<tt>&nbsp;</tt></span><a href="#%28part._.Point_of_no_return%29" class="tocsubseclink" data-pltdoc="x">Point of no <span class="RktSym">return</span><span class="RktMeta"></span></a></td></tr><tr><td><span class="tocsublinknumber">13.1.3<tt>&nbsp;</tt></span><a href="#%28part._.Multiple_input_values___rest_arguments%29" class="tocsubseclink" data-pltdoc="x">Multiple input values &amp; rest arguments</a></td></tr><tr><td><span class="tocsublinknumber">13.1.4<tt>&nbsp;</tt></span><a href="#%28part._.Returning_an_.X-expression%29" class="tocsubseclink" data-pltdoc="x">Returning an X-<wbr></wbr>expression</a></td></tr><tr><td><span class="tocsublinknumber">13.1.5<tt>&nbsp;</tt></span><a href="#%28part._.Using_variables_within_strings%29" class="tocsubseclink" data-pltdoc="x">Using variables within strings</a></td></tr><tr><td><span class="tocsublinknumber">13.1.6<tt>&nbsp;</tt></span><a href="#%28part._.Parsing_attributes%29" class="tocsubseclink" data-pltdoc="x">Parsing attributes</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">8.4.900</span></div><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="pollen-command-syntax.html" title="backward to &quot;12 Pollen command syntax&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot; Pollen :这本书是一个程序&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="Module_reference.html" title="forward to &quot;14 Module reference&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3>13<tt>&nbsp;</tt><a name="(part._programming-pollen)"></a>Programming Pollen</h3><p>Core techniques for getting Pollen to do your bidding.</p><p>I&rsquo;ll assume you&rsquo;re familiar with the workings of Racket generally and Pollen in particular, especially <a href="pollen-command-syntax.html" data-pltdoc="x">Pollen command syntax</a>.</p><p>Experienced programmers, you will find this an easy read.</p><p>Inexperienced programmers, you might find some parts a trudge, but keep going. Learning the material on this page will pay hefty dividends for as long as you use Pollen.</p><h4>13.1<tt>&nbsp;</tt><a name="(part._.Tag_functions)"></a>Tag functions</h4><p>The <a href="third-tutorial.html" data-pltdoc="x">third tutorial</a> introduced you to the idea that <a href="third-tutorial.html#%28part._tags-are-functions%29" data-pltdoc="x">&#26631;&#31614;&#26159;&#20989;&#25968;</a>. Let&rsquo;s recap the golden rules of tag functions that were first covered there:</p><ol><li><p>Every Pollen tag calls a function with the same name.</p></li><li><p>The input values for that function are the attributes and elements of the tag.</p></li><li><p>The whole tag &#8212;&#160;tag name, attributes, and elements &#8212; is replaced with the return value of the called function.</p></li></ol><h5>13.1.1<tt>&nbsp;</tt><a name="(part._.Tag-function_syntax)"></a>Tag-function syntax</h5><p>To be safe, let&rsquo;s review what we mean by <span style="font-style: italic">tag</span>, <span style="font-style: italic">attributes</span>, and <span style="font-style: italic">elements</span>, in Pollen-mode syntax:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktMeta"></span><span class="RktMeta">A</span><span class="hspace">&nbsp;</span><span class="RktMeta">tag</span><span class="hspace">&nbsp;</span><span class="RktMeta">alone:</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">get-author-name</span><span class="RktPn">[</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">A</span><span class="hspace">&nbsp;</span><span class="RktMeta">tag</span><span class="hspace">&nbsp;</span><span class="RktMeta">with</span><span class="hspace">&nbsp;</span><span class="RktMeta">elements:</span><span class="hspace">&nbsp;</span><span class="RktMeta">Adding</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">em</span><span class="RktPn">{</span><span class="RktMeta">emphasis</span><span class="hspace">&nbsp;</span><span class="RktMeta">to</span><span class="hspace">&nbsp;</span><span class="RktMeta">words</span><span class="RktPn">}</span><span class="RktMeta">.</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">A</span><span class="hspace">&nbsp;</span><span class="RktMeta">tag</span><span class="hspace">&nbsp;</span><span class="RktMeta">with</span><span class="hspace">&nbsp;</span><span class="RktMeta">attributes</span><span class="hspace">&nbsp;</span><span class="RktMeta">and</span><span class="hspace">&nbsp;</span><span class="RktMeta">elements:</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">div</span><span class="RktPn">[</span><span class="RktSym"><span class="badlink"><span class="RktValLink">'</span></span></span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">attr1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"val1"</span><span class="RktPn">)</span><span class="RktPn">(</span><span class="RktSym">attr2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"val2"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">{</span><span class="RktMeta">My</span><span class="hspace">&nbsp;</span><span class="RktMeta">nice</span><span class="hspace">&nbsp;</span><span class="RktMeta">div.</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">A</span><span class="hspace">&nbsp;</span><span class="RktMeta">tag</span><span class="hspace">&nbsp;</span><span class="RktMeta">with</span><span class="hspace">&nbsp;</span><span class="RktMeta">attributes</span><span class="hspace">&nbsp;</span><span class="RktMeta">and</span><span class="hspace">&nbsp;</span><span class="RktMeta">elements</span><span class="hspace">&nbsp;</span><span class="RktMeta">(alternate</span><span class="hspace">&nbsp;</span><span class="RktMeta">syntax):</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">div</span><span class="RktPn">[</span><span class="RktPn">#:attr1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"val1"</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">#:attr2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"val2"</span><span class="RktPn">]</span><span class="RktPn">{</span><span class="RktMeta">My</span><span class="hspace">&nbsp;</span><span class="RktMeta">nice</span><span class="hspace">&nbsp;</span><span class="RktMeta">div.</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr></table></blockquote><p>Let&rsquo;s also recall that these commands can be written in Racket mode equivalently:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktMeta"></span><span class="RktMeta">A</span><span class="hspace">&nbsp;</span><span class="RktMeta">tag</span><span class="hspace">&nbsp;</span><span class="RktMeta">alone:</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym">get-author-name</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">A</span><span class="hspace">&nbsp;</span><span class="RktMeta">tag</span><span class="hspace">&nbsp;</span><span class="RktMeta">with</span><span class="hspace">&nbsp;</span><span class="RktMeta">elements:</span><span class="hspace">&nbsp;</span><span class="RktMeta">Adding</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym">em</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"emphasis</span><span class="hspace">&nbsp;</span><span class="RktVal">to</span><span class="hspace">&nbsp;</span><span class="RktVal">words"</span><span class="RktPn">)</span><span class="RktMeta">.</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">A</span><span class="hspace">&nbsp;</span><span class="RktMeta">tag</span><span class="hspace">&nbsp;</span><span class="RktMeta">with</span><span class="hspace">&nbsp;</span><span class="RktMeta">attributes</span><span class="hspace">&nbsp;</span><span class="RktMeta">and</span><span class="hspace">&nbsp;</span><span class="RktMeta">elements:</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym">div</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="badlink"><span class="RktValLink">'</span></span></span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">attr1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"val1"</span><span class="RktPn">)</span><span class="RktPn">(</span><span class="RktSym">attr2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"val2"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"My</span><span class="hspace">&nbsp;</span><span class="RktVal">nice</span><span class="hspace">&nbsp;</span><span class="RktVal">div."</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote><p>Let&rsquo;s also remember that a tag without attributes or elements is interpreted as a value. If that&rsquo;s what you want &#8212;&#160;for instance, when you <span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span> a tag to hold a value &#8212;&#160;then great. But if you <span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span> a tag as a function, you need to add square brackets to signal that you want to evaluate the function:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">author-name</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"Brennan</span><span class="hspace">&nbsp;</span><span class="RktVal">Huff"</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta">;</span><span class="hspace">&nbsp;</span><span class="RktMeta">a</span><span class="hspace">&nbsp;</span><span class="RktMeta">tag</span><span class="hspace">&nbsp;</span><span class="RktMeta">holding</span><span class="hspace">&nbsp;</span><span class="RktMeta">a</span><span class="hspace">&nbsp;</span><span class="RktMeta">value</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">get-author-name</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"Dale</span><span class="hspace">&nbsp;</span><span class="RktVal">Doback"</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta">;</span><span class="hspace">&nbsp;</span><span class="RktMeta">a</span><span class="hspace">&nbsp;</span><span class="RktMeta">tag</span><span class="hspace">&nbsp;</span><span class="RktMeta">function</span><span class="hspace">&nbsp;</span><span class="RktMeta">returning</span><span class="hspace">&nbsp;</span><span class="RktMeta">a</span><span class="hspace">&nbsp;</span><span class="RktMeta">value</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">To</span><span class="hspace">&nbsp;</span><span class="RktMeta">refer</span><span class="hspace">&nbsp;</span><span class="RktMeta">to</span><span class="hspace">&nbsp;</span><span class="RktMeta">the</span><span class="hspace">&nbsp;</span><span class="RktMeta">value</span><span class="hspace">&nbsp;</span><span class="RktMeta">held</span><span class="hspace">&nbsp;</span><span class="RktMeta">by</span><span class="hspace">&nbsp;</span><span class="RktMeta">a</span><span class="hspace">&nbsp;</span><span class="RktMeta">tag</span><span class="hspace">&nbsp;</span><span class="RktMeta">name:</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">author-name</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta">or</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;|</span><span class="RktSym">author-name</span><span class="RktPn">|</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">If</span><span class="hspace">&nbsp;</span><span class="RktMeta">a</span><span class="hspace">&nbsp;</span><span class="RktMeta">tag</span><span class="hspace">&nbsp;</span><span class="RktMeta">name</span><span class="hspace">&nbsp;</span><span class="RktMeta">represents</span><span class="hspace">&nbsp;</span><span class="RktMeta">a</span><span class="hspace">&nbsp;</span><span class="RktMeta">function,</span><span class="hspace">&nbsp;</span><span class="RktMeta">you</span><span class="hspace">&nbsp;</span><span class="RktMeta">need</span><span class="hspace">&nbsp;</span><span class="RktMeta">to</span><span class="hspace">&nbsp;</span><span class="RktMeta">add</span><span class="hspace">&nbsp;</span><span class="RktMeta">square</span><span class="hspace">&nbsp;</span><span class="RktMeta">brackets</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">to</span><span class="hspace">&nbsp;</span><span class="RktMeta">invoke</span><span class="hspace">&nbsp;</span><span class="RktMeta">the</span><span class="hspace">&nbsp;</span><span class="RktMeta">function:</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">get-author-name</span><span class="RktPn">[</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">This</span><span class="hspace">&nbsp;</span><span class="RktMeta">refers</span><span class="hspace">&nbsp;</span><span class="RktMeta">to</span><span class="hspace">&nbsp;</span><span class="RktMeta">the</span><span class="hspace">&nbsp;</span><span class="RktMeta">function</span><span class="hspace">&nbsp;</span><span class="RktMeta">as</span><span class="hspace">&nbsp;</span><span class="RktMeta">a</span><span class="hspace">&nbsp;</span><span class="RktMeta">value</span><span class="hspace">&nbsp;</span><span class="RktMeta">(not</span><span class="hspace">&nbsp;</span><span class="RktMeta">usually</span><span class="hspace">&nbsp;</span><span class="RktMeta">what</span><span class="hspace">&nbsp;</span><span class="RktMeta">you</span><span class="hspace">&nbsp;</span><span class="RktMeta">want):</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">get-author-name</span><span class="RktMeta"></span></td></tr></table></blockquote><h5>13.1.2<tt>&nbsp;</tt><a name="(part._.Point_of_no_return)"></a>Point of no <span class="RktSym">return</span><span class="RktMeta"></span></h5><p> If you&rsquo;ve written functions in other programming languages, you might be accustomed to using a <span class="RktSym">return</span><span class="RktMeta"></span> statement to send a value back from the function. This doesn&rsquo;t exist in Pollen or Racket &#8212;&#160;the return value of any function is just the last expression evaluated. In the example below, <span class="RktVal">"BAP"</span><span class="RktMeta"></span> becomes the return value because it&rsquo;s in the last position, and <span class="RktVal">"BOOM"</span><span class="RktMeta"></span> is ignored:</p><div class="fileblock"><div class="SIntrapara"><div class="fileblockFiletitle"><span class="fileblockFilename"><span class="stt">"article.html.pm"</span></span></div></div><div class="SIntrapara"><div class="fileblockFilecontent"><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">strong</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">word</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"BOOM"</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"BAP"</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">I</span><span class="hspace">&nbsp;</span><span class="RktMeta">want</span><span class="hspace">&nbsp;</span><span class="RktMeta">to</span><span class="hspace">&nbsp;</span><span class="RktMeta">attend</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">em</span><span class="RktPn">{</span><span class="RktMeta">RacketCon</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">strong</span><span class="RktPn">{</span><span class="RktMeta">this</span><span class="RktPn">}</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta">year</span><span class="RktPn">}</span><span class="RktMeta">.</span><span class="RktMeta"></span></td></tr></table></blockquote></div></div></div></div><p>Yielding:</p><blockquote class="SubFlow"><p><span class="RktVal"><span class="stt">'(root "I want to attend " (em "RacketCon " "BAP" " year") ".")</span></span></p></blockquote><h5>13.1.3<tt>&nbsp;</tt><a name="(part._.Multiple_input_values___rest_arguments)"></a>Multiple input values &amp; rest arguments</h5><p> Sometimes a tag will have only one word or string that becomes its input. More likely, however, it will have multiple values (this is inevitable with nested tags, because the results aren&rsquo;t concatenated). For instance, if we attach our function to <span class="RktSym">em</span> rather than <span class="RktSym">strong</span>:</p><div class="fileblock"><div class="SIntrapara"><div class="fileblockFiletitle"><span class="fileblockFilename"><span class="stt">"article.html.pm"</span></span></div></div><div class="SIntrapara"><div class="fileblockFilecontent"><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">em</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">word</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"BOOM"</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">I</span><span class="hspace">&nbsp;</span><span class="RktMeta">want</span><span class="hspace">&nbsp;</span><span class="RktMeta">to</span><span class="hspace">&nbsp;</span><span class="RktMeta">attend</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">em</span><span class="RktPn">{</span><span class="RktMeta">RacketCon</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">strong</span><span class="RktPn">{</span><span class="RktMeta">this</span><span class="RktPn">}</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta">year</span><span class="RktPn">}</span><span class="RktMeta">.</span><span class="RktMeta"></span></td></tr></table></blockquote></div></div></div></div><p>Look what happens:</p><blockquote class="SubFlow"><p><span class="RktErr"><span class="stt">em: arity mismatch;<br/>the expected number of arguments does not match the given number<br/>expected: 1<br/>&#160;&#160;given: 3</span></span></p></blockquote><p>The error arises because the <span class="RktSym">em</span> function is getting three arguments &#8212;&#160;<span class="RktVal">"RacketCon</span><span class="hspace">&nbsp;</span><span class="RktVal">"</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="badlink"><span class="RktValLink">'</span></span></span><span class="RktPn">(</span><span class="RktSym">strong</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"this"</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"</span><span class="hspace">&nbsp;</span><span class="RktVal">year"</span><span class="RktMeta"></span> &#8212; but has been defined to only accept one argument, <span class="RktSym">word</span>. This is the &ldquo;arity mismatch.&rdquo;</p><p>To fix this, it&rsquo;s better to get in the habit of writing tag functions that accept an indefinite number of input values. You do this by defining your function with a <span style="font-style: italic"><font class="badlink">rest argument</font></span> (as in, &ldquo;give me the rest of the input values.&rdquo;) To use a rest argument, put it last in your list of input arguments, and add a period <span class="RktInBG"><span class="hspace"></span><span class="RktIn">.</span><span class="hspace"></span></span> before:</p><div class="fileblock"><div class="SIntrapara"><div class="fileblockFiletitle"><span class="fileblockFilename"><span class="stt">"article.html.pm"</span></span></div></div><div class="SIntrapara"><div class="fileblockFilecontent"><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">em</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">.</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">parts</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"BOOM"</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">I</span><span class="hspace">&nbsp;</span><span class="RktMeta">want</span><span class="hspace">&nbsp;</span><span class="RktMeta">to</span><span class="hspace">&nbsp;</span><span class="RktMeta">attend</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">em</span><span class="RktPn">{</span><span class="RktMeta">RacketCon</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">strong</span><span class="RktPn">{</span><span class="RktMeta">this</span><span class="RktPn">}</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta">year</span><span class="RktPn">}</span><span class="RktMeta">.</span><span class="RktMeta"></span></td></tr></table></blockquote></div></div></div></div><p>This time, the source file will run without an error, producing this:</p><blockquote class="SubFlow"><p><span class="RktVal"><span class="stt">'(root "I want to attend " "BOOM" ".")</span></span></p></blockquote><p>A rest argument like <span class="RktSym">parts</span> is a <span class="RktSym"><span class="badlink"><span class="RktValLink">list</span></span></span> of individual arguments. So if you want to unpack &amp; process these arguments separately, you can use Racket&rsquo;s extensive list-processing functions (see <font class="badlink">(part ("(lib scribblings/guide/guide.scrbl)" "pairs"))</font>). Also see <span class="RktSym"><span class="badlink"><span class="RktValLink">quasiquote</span></span></span> below.</p><h5>13.1.4<tt>&nbsp;</tt><a name="(part._.Returning_an_.X-expression)"></a>Returning an X-expression</h5><p> Often, you won&rsquo;t use a tag function to replace a whole tag with a string &#8212;&#160;you&rsquo;ll replace it with a different tag, described by an X-expression, like so:</p><div class="fileblock"><div class="SIntrapara"><div class="fileblockFiletitle"><span class="fileblockFilename"><span class="stt">"article.html.pm"</span></span></div></div><div class="SIntrapara"><div class="fileblockFilecontent"><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">em</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">.</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">parts</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="badlink"><span class="RktValLink">'</span></span></span><span class="RktPn">(</span><span class="RktSym">big</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"BOOM"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">I</span><span class="hspace">&nbsp;</span><span class="RktMeta">want</span><span class="hspace">&nbsp;</span><span class="RktMeta">to</span><span class="hspace">&nbsp;</span><span class="RktMeta">attend</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">em</span><span class="RktPn">{</span><span class="RktMeta">RacketCon</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">strong</span><span class="RktPn">{</span><span class="RktMeta">this</span><span class="RktPn">}</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta">year</span><span class="RktPn">}</span><span class="RktMeta">.</span><span class="RktMeta"></span></td></tr></table></blockquote></div></div></div></div><p>Which produces:</p><blockquote class="SubFlow"><p><span class="RktVal"><span class="stt">'(root "I want to attend " (big "BOOM") ".")</span></span></p></blockquote><p>The <span class="RktSym"><span class="badlink"><span class="RktValLink">quote</span></span></span> mark <span class="RktInBG"><span class="hspace"></span><span class="RktIn">'</span><span class="hspace"></span></span> before the X-expression signals to Racket that you want to use what follows as a literal value.</p><p>To build X-expressions that are more elaborate, you have two options.</p><p>First is <span class="RktSym"><span class="badlink"><span class="RktValLink">quasiquote</span></span></span>. Quasiquote works like quote, but starts with a backtick character <span class="RktInBG"><span class="hspace"></span><span class="RktIn">`</span><span class="hspace"></span></span>. What makes it &ldquo;quasi&rdquo; is that you can insert variables using the <span class="RktSym"><span class="badlink"><span class="RktValLink">unquote</span></span></span> operator, which is a comma <span class="RktInBG"><span class="hspace"></span><span class="RktIn">,</span><span class="hspace"></span></span> or merge a list of values with the <span class="RktSym"><span class="badlink"><span class="RktValLink">unquote-splicing</span></span></span> operator, which is a comma followed by an @ sign <span class="RktInBG"><span class="hspace"></span><span class="RktIn">,@</span><span class="hspace"></span></span>.</p><p>Let&rsquo;s adapt the example above to use <span class="RktSym"><span class="badlink"><span class="RktValLink">quasiquote</span></span></span>. Suppose we want to take the <span class="RktSym">parts</span> we get as input and put them inside a <span class="RktSym">big</span> tag. This is easy to notate with <span class="RktSym"><span class="badlink"><span class="RktValLink">quasiquote</span></span></span> and the <span class="RktSym"><span class="badlink"><span class="RktValLink">unquote-splicing</span></span></span> operator, because <span class="RktSym">parts</span> is a list:</p><div class="fileblock"><div class="SIntrapara"><div class="fileblockFiletitle"><span class="fileblockFilename"><span class="stt">"article.html.pm"</span></span></div></div><div class="SIntrapara"><div class="fileblockFilecontent"><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">em</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">.</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">parts</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="badlink"><span class="RktValLink">`</span></span></span><span class="RktPn">(</span><span class="RktSym">big</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="badlink"><span class="RktValLink">,@</span></span></span><span class="RktSym">parts</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">I</span><span class="hspace">&nbsp;</span><span class="RktMeta">want</span><span class="hspace">&nbsp;</span><span class="RktMeta">to</span><span class="hspace">&nbsp;</span><span class="RktMeta">attend</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">em</span><span class="RktPn">{</span><span class="RktMeta">RacketCon</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">strong</span><span class="RktPn">{</span><span class="RktMeta">this</span><span class="RktPn">}</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta">year</span><span class="RktPn">}</span><span class="RktMeta">.</span><span class="RktMeta"></span></td></tr></table></blockquote></div></div></div></div><p>Which produces this:</p><blockquote class="SubFlow"><p><span class="RktVal"><span class="stt">'(root "I want to attend " (big "RacketCon " (strong "this") " year") ".")</span></span></p></blockquote><p>Of course you can also nest X-expressions in your return value:</p><div class="fileblock"><div class="SIntrapara"><div class="fileblockFiletitle"><span class="fileblockFilename"><span class="stt">"article.html.pm"</span></span></div></div><div class="SIntrapara"><div class="fileblockFilecontent"><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">em</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">.</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">parts</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="badlink"><span class="RktValLink">`</span></span></span><span class="RktPn">(</span><span class="RktSym">extra</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">big</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="badlink"><span class="RktValLink">,@</span></span></span><span class="RktSym">parts</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">I</span><span class="hspace">&nbsp;</span><span class="RktMeta">want</span><span class="hspace">&nbsp;</span><span class="RktMeta">to</span><span class="hspace">&nbsp;</span><span class="RktMeta">attend</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">em</span><span class="RktPn">{</span><span class="RktMeta">RacketCon</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">strong</span><span class="RktPn">{</span><span class="RktMeta">this</span><span class="RktPn">}</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta">year</span><span class="RktPn">}</span><span class="RktMeta">.</span><span class="RktMeta"></span></td></tr></table></blockquote></div></div></div></div><p>The second option for building X-expressions is to use the <font class="badlink">(part ("(lib txexpr/scribblings/txexpr.scrbl)" "top"))</font> library that&rsquo;s included with Pollen (see those docs for more information).</p><h5>13.1.5<tt>&nbsp;</tt><a name="(part._.Using_variables_within_strings)"></a>Using variables within strings</h5><p> The usual way is to use the <span class="RktSym"><span class="badlink"><span class="RktValLink">format</span></span></span> function:</p><p><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">format</span></span></span><span class="stt"> </span><span class="RktVal">"String with variable: ~a"</span><span class="stt"> </span><span class="RktSym">variable-name</span><span class="RktPn">)</span></p><p>See the docs for <span class="RktSym"><span class="badlink"><span class="RktValLink">format</span></span></span> and <span class="RktSym"><span class="badlink"><span class="RktValLink">fprintf</span></span></span> for your options.</p><p>Be careful if you&rsquo;re working with integers and X-expressions &#8212; a raw integer is treated as a character code, not an integer string. Using <span class="RktSym"><span class="badlink"><span class="RktValLink">format</span></span></span> is essential:</p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="Template.html#%28def._%28%28lib._pollen%2Ftemplate%2Fhtml..rkt%29._-~3ehtml%29%29" class="RktValLink" data-pltdoc="x"><span class="nobreak">-&gt;</span>html</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">div</span><span class="hspace">&nbsp;</span><span class="RktVal">"A raw integer indicates a character code: "</span><span class="hspace">&nbsp;</span><span class="RktVal">42</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">"&lt;div&gt;A raw integer indicates a character code: &amp;#42;&lt;/div&gt;"</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="Template.html#%28def._%28%28lib._pollen%2Ftemplate%2Fhtml..rkt%29._-~3ehtml%29%29" class="RktValLink" data-pltdoc="x"><span class="nobreak">-&gt;</span>html</a></span><span class="hspace">&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">div</span><span class="hspace">&nbsp;</span><span class="RktVal">"Use format to make it a string: "</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">format</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">"~a"</span><span class="hspace">&nbsp;</span><span class="RktVal">42</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">"&lt;div&gt;Use format to make it a string: 42&lt;/div&gt;"</span></p></td></tr></table></blockquote></div></p><h5>13.1.6<tt>&nbsp;</tt><a name="(part._.Parsing_attributes)"></a>Parsing attributes</h5><p>Detecting attributes in an argument list can be tricky because a) the tag may or may not have attributes, b) those attributes may be in standard or abbreviated syntax. For this reason, Pollen provides a <span class="RktSym"><a href="Tag.html#%28form._%28%28lib._pollen%2Ftag..rkt%29._define-tag-function%29%29" class="RktStxLink" data-pltdoc="x">define-tag-function</a></span> macro (in the <span class="RktSym">pollen/tag</span> library) that you can use in custom tag functions to separate the attributes and elements:</p><div class="fileblock"><div class="SIntrapara"><div class="fileblockFiletitle"><span class="fileblockFilename"><span class="stt">"article.html.pm"</span></span></div></div><div class="SIntrapara"><div class="fileblockFilecontent"><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">require</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">pollen/tag</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><a href="Tag.html#%28form._%28%28lib._pollen%2Ftag..rkt%29._define-tag-function%29%29" class="RktStxLink" data-pltdoc="x">define-tag-function</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">em</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">attributes</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">elements</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="badlink"><span class="RktValLink">`</span></span></span><span class="RktPn">(</span><span class="RktSym">extra</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="badlink"><span class="RktValLink">,</span></span></span><span class="RktSym">attributes</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">big</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="badlink"><span class="RktValLink">,@</span></span></span><span class="RktSym">elements</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">I</span><span class="hspace">&nbsp;</span><span class="RktMeta">want</span><span class="hspace">&nbsp;</span><span class="RktMeta">to</span><span class="hspace">&nbsp;</span><span class="RktMeta">attend</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">em</span><span class="RktPn">[</span><span class="RktPn">#:key</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"value"</span><span class="RktPn">]</span><span class="RktPn">{</span><span class="RktMeta">RacketCon</span><span class="RktPn">}</span><span class="RktMeta">.</span><span class="RktMeta"></span></td></tr></table></blockquote></div></div></div></div><p>This will move the <span class="RktSym">elements</span> inside the <span class="RktSym">big</span> tag, and attach the <span class="RktSym">attributes</span> to the <span class="RktSym">extra</span> tag:</p><blockquote class="SubFlow"><p><span class="RktVal"><span class="stt">'(root "I want to attend " (extra ((key "value")) (big "RacketCon")) ".")</span></span></p></blockquote><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="pollen-command-syntax.html" title="backward to &quot;12 Pollen command syntax&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot; Pollen :这本书是一个程序&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="Module_reference.html" title="forward to &quot;14 Module reference&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>